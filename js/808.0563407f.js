(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[808],{7045:function(e,t,o){var n=o(6339),i=o(3070);e.exports=function(e,t,o){return o.get&&n(o.get,t,{getter:!0}),o.set&&n(o.set,t,{setter:!0}),i.f(e,t,o)}},2062:function(e,t,o){"use strict";var n=o(9781),i=o(1702),l=o(7045),r=URLSearchParams.prototype,a=i(r.forEach);n&&!("size"in r)&&l(r,"size",{get:function(){var e=0;return a(this,(function(){e++})),e},configurable:!0,enumerable:!0})},5366:function(e,t,o){"use strict";o.d(t,{Z:function(){return I}});var n=o(3396),i=o(7139);const l=e=>((0,n.dD)("data-v-70020e16"),e=e(),(0,n.Cn)(),e),r={id:"clientFileListComponent"},a=l((()=>(0,n._)("h2",{style:{"margin-bottom":"30px"}},"Vos fichiers",-1))),s={id:"clientFileList"},u={class:"list-group"},d={class:"fileRowText"},c={id:"fileRowTextName"},p={class:"fileRowButtons"},m=["onClick"],f=["onClick"],h=["onClick"];function b(e,t,o,l,b,v){const _=(0,n.up)("client-new-file-form");return(0,n.wg)(),(0,n.iD)("div",r,[a,(0,n._)("div",s,[(0,n._)("ul",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(b.userFiles,(e=>((0,n.wg)(),(0,n.iD)("li",{class:"fileRow list-group-item",key:e.name},[(0,n._)("div",d,[(0,n._)("span",c,(0,i.zw)(e.nom_document),1),(0,n._)("span",null,(0,i.zw)(e.type),1)]),(0,n._)("div",p,[(0,n._)("button",{class:"btn btn-success fileRowButton",onClick:()=>v.handleDownload(e.id_document,e.nom_document)},"Télécharger",8,m),(0,n._)("button",{class:"btn btn-light fileRowButton",onClick:()=>v.handleUpdate(e.id_document)},"Remplacer",8,f),(0,n._)("button",{class:"btn btn-danger fileRowButton",onClick:()=>v.handleDelete(e.id_document)},"Supprimer",8,h)])])))),128))])]),(0,n.Wm)(_)])}o(2062),o(7658);var v=o(9620),_={components:{ClientNewFileForm:v.Z},name:"ClientFileList",data(){return{userFiles:[]}},methods:{handleDownload(e,t){console.log(e),fetch(this.api_url+"document/downloadDocument/"+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.blob();throw new Error("Something went wrong")})).then((e=>{console.log(e);const o=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.href=o,n.setAttribute("download",t),document.body.appendChild(n),n.click()}))},handleUpdate(e){let t=this;console.log(e);const o=document.createElement("input");o.type="file",o.ref="file",o.click(),o.onchange=()=>{const n=new FormData;console.log(o),n.append("file",o.files[0]);let i=new XMLHttpRequest;i.open("PATCH",this.api_url+"document/updateDocument/"+e,!0),i.setRequestHeader("Authorization",localStorage.getItem("token")),i.send(n),i.onload=function(){200==i.status?(console.log("File uploaded"),t.userFiles.find((t=>t.id_document===e)).nom_document=o.files[0].name,t.$notify({title:"Succès",text:"Votre fichier a été mis à jour",type:"success"})):(console.log("Error "+i.status+" occurred when trying to upload your file."),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de la mise à jour de votre fichier",type:"error"}))}}},handleDelete(e){confirm("Voulez-vous vraiment supprimer ce fichier ?")&&(console.log(e),fetch(this.api_url+"document/deleteDocument/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();throw new Error("Une erreur est survenue lors de la suppression de votre fichier")})).then((t=>{console.log(t),this.userFiles=this.userFiles.filter((t=>t.id_document!==e)),this.$notify({title:"Succès",text:"Votre fichier a été supprimé",type:"success"})})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de la suppression de votre fichier",type:"error"})})))},fetchUserFiles(){fetch(this.api_url+"document/getAllDocuments",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();if(401!=e.status)throw new Error("Une erreur est survenue lors de la récupération de vos fichiers");this.$router.push("/login/client")})).then((e=>{console.log(e),this.userFiles=e;for(let t=0;t<this.userFiles.length;t++)null==this.userFiles[t].type&&(this.userFiles[t].type="Non spécifié")})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de la récupération de vos fichiers",type:"error"})}))}},mounted(){this.fetchUserFiles()}},y=o(89);const g=(0,y.Z)(_,[["render",b],["__scopeId","data-v-70020e16"]]);var I=g},9620:function(e,t,o){"use strict";o.d(t,{Z:function(){return F}});var n=o(3396),i=o(9242);const l=e=>((0,n.dD)("data-v-5c86df52"),e=e(),(0,n.Cn)(),e),r={key:0,id:"cover"},a={key:1,id:"modal-file-form",ref:"modalForm"},s=l((()=>(0,n._)("h2",null,"Nouveau document",-1))),u={id:"newFileFormFields"},d={class:"mb-3"},c=l((()=>(0,n._)("label",{for:"formFile",class:"form-label"},"Votre fichier",-1))),p={class:"mb-3"},m=l((()=>(0,n._)("label",{for:"formNameTitle",class:"form-label"},"Nom du fichier",-1))),f={class:"mb-3"},h=l((()=>(0,n._)("label",{for:"formDocType",class:"form-label"},"Genre",-1))),b=(0,n.uE)('<option value="" data-v-5c86df52>Selectionnez le type du fichier</option><option value="Document d&#39;identité" data-v-5c86df52>Document d&#39;identité</option><option value="Fiche de paie" data-v-5c86df52>Fiche de paie</option><option value="Document médical" data-v-5c86df52>Document médical</option><option value="Justificatif de domicile" data-v-5c86df52>Justificatif de domicile</option><option value="Autre" data-v-5c86df52>Autre</option>',6),v=[b],_=l((()=>(0,n._)("button",{type:"submit",class:"btn btn-success"},"Envoyer",-1)));function y(e,t,o,l,b,y){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("button",{type:"button",id:"openNFButton",onClick:t[0]||(t[0]=(...e)=>y.handleDisplay&&y.handleDisplay(...e))},"NOUVEAU DOCUMENT"),b.displayForm?((0,n.wg)(),(0,n.iD)("div",r)):(0,n.kq)("",!0),b.displayForm?((0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("button",{id:"closeButton",onClick:t[1]||(t[1]=(...e)=>y.handleDisplay&&y.handleDisplay(...e))},"X"),s,(0,n._)("form",{id:"newFileForm",onSubmit:t[6]||(t[6]=(...e)=>y.handleSubmit&&y.handleSubmit(...e))},[(0,n._)("div",u,[(0,n._)("div",d,[c,(0,n._)("input",{class:"form-control",type:"file",id:"formFile",onChange:t[2]||(t[2]=e=>y.onFilesChange(e)),required:""},null,32)]),(0,n._)("div",p,[m,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formNameTitle","onUpdate:modelValue":t[3]||(t[3]=e=>b.name=e),placeholder:"Nom du fichier",maxlength:"30",required:""},null,512),[[i.nr,b.name]])]),(0,n._)("div",f,[h,(0,n.wy)((0,n._)("select",{class:"form-select","aria-label":"Default select example",id:"formDocType","onUpdate:modelValue":t[4]||(t[4]=e=>b.type=e),required:""},v,512),[[i.bM,b.type]])])]),_,(0,n._)("button",{type:"button",class:"btn btn-warning",onClick:t[5]||(t[5]=(...e)=>y.handleDisplay&&y.handleDisplay(...e))},"Annuler")],32)],512)):(0,n.kq)("",!0)])}o(7658);var g={name:"ClientNewFileForm",data(){return{name:"",file:null,displayForm:!1,type:""}},methods:{onFilesChange(e){this.file=e.target.files[0]},handleSubmit(e){if(""==this.name||null==this.file||""==this.type)return;e.preventDefault();let t=new FormData;t.append("file",this.file),t.append("nom_document",this.name),t.append("type",this.type);let o=new XMLHttpRequest;o.open("POST",this.api_url+"document/addDocument"),o.setRequestHeader("Authorization",localStorage.getItem("token")),o.send(t),o.onload=()=>{if(200==o.status){let e=JSON.parse(o.response);console.log("File sent"),console.log(e.id_document),this.$parent.userFiles.push({nom_document:this.name+"."+this.file.name.split(".").pop(),id_document:e.id_document,type:this.type}),this.name="",this.file=null,this.type="",this.displayForm=!1,this.$notify({title:"Succès",text:"Votre document a bien été envoyé",type:"success"})}else console.log("Error while sending file"),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de l'envoi du document",type:"error"})}},handleDisplay(){console.log("display"),this.displayForm=!this.displayForm}}},I=o(89);const w=(0,I.Z)(g,[["render",y],["__scopeId","data-v-5c86df52"]]);var F=w},9808:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return ye}});var n=o(3396),i=o(9242);const l=e=>((0,n.dD)("data-v-5bd53342"),e=e(),(0,n.Cn)(),e),r={id:"content"},a={id:"topDog"},s=l((()=>(0,n._)("h2",null,"Profil",-1))),u={class:"fields"},d={class:"mb-3 profilePageField"},c=l((()=>(0,n._)("label",{for:"formName",class:"form-label"},"Nom",-1))),p={class:"mb-3 profilePageField"},m=l((()=>(0,n._)("label",{for:"formFirstName",class:"form-label"},"Prénom",-1))),f={class:"mb-3 profilePageField"},h=l((()=>(0,n._)("label",{for:"formEmail",class:"form-label"},"Email",-1))),b={class:"mb-3 profilePageField"},v=l((()=>(0,n._)("label",{for:"formGenre",class:"form-label"},"Genre",-1))),_=l((()=>(0,n._)("option",{value:""},"Selectionnez votre genre",-1))),y=l((()=>(0,n._)("option",{value:"1"},"Homme",-1))),g=l((()=>(0,n._)("option",{value:"2"},"Femme",-1))),I=l((()=>(0,n._)("option",{value:"3"},"Autre",-1))),w=[_,y,g,I],F={class:"mb-3 profilePageField"},C=l((()=>(0,n._)("label",{for:"formBirthDate",class:"form-label"},"Date de naissance",-1))),D={class:"mb-3 profilePageField"},V=l((()=>(0,n._)("label",{for:"formTelephone",class:"form-label"},"Telephone",-1))),S={class:"mb-3 profilePageField"},U=l((()=>(0,n._)("label",{for:"formCountry",class:"form-label"},"Pays",-1))),E={class:"mb-3 profilePageField"},P=l((()=>(0,n._)("label",{for:"formCity",class:"form-label"},"Ville",-1))),k={class:"mb-3 profilePageField"},A=l((()=>(0,n._)("label",{for:"formAddress",class:"form-label"},"Adresse",-1))),q={class:"mb-3 profilePageField"},x=l((()=>(0,n._)("label",{for:"formHousingStatus",class:"form-label"},"Statut immobilier",-1))),T=(0,n.uE)('<option value="" data-v-5bd53342>Aujourd&#39;hui vous êtes ...</option><option value="Locataire" data-v-5bd53342>Locataire</option><option value="Propriétaire" data-v-5bd53342>Propriétaire</option><option value="Bénéficiare d&#39;un logement de fonction" data-v-5bd53342>Bénéficiare d&#39;un logement de fonction</option><option value="Hébergé à titre gratuit" data-v-5bd53342>Hébergé à titre gratuit</option><option value="Autre" data-v-5bd53342>Autre</option>',6),N=[T],R={class:"mb-3 profilePageField"},j=l((()=>(0,n._)("label",{for:"formCurrentRent",class:"form-label"},"Loyer Actuel (Si applicable)",-1))),M={class:"mb-3 profilePageField"},z=l((()=>(0,n._)("label",{for:"formFamilyStatus",class:"form-label"},"Situation familiale",-1))),L=(0,n.uE)('<option value="" data-v-5bd53342>Aujourd&#39;hui vous êtes ...</option><option value="Célibataire" data-v-5bd53342>Célibataire</option><option value="Marié(e) contrat de mariage" data-v-5bd53342>Marié(e) contrat de mariage</option><option value="Marié(e) communauté de biens" data-v-5bd53342>Marié(e) communauté de biens</option><option value="Concubin(e) / Vie maritale" data-v-5bd53342>Concubin(e) / Vie maritale</option><option value="PACS" data-v-5bd53342>PACS</option><option value="Divorcé(e)" data-v-5bd53342>Divorcé(e)</option><option value="Séparé(e)" data-v-5bd53342>Séparé(e)</option><option value="Veuf(ve)" data-v-5bd53342>Veuf(ve)</option><option value="Autre" data-v-5bd53342>Autre</option>',10),B=[L],H={class:"mb-3 profilePageField"},$=l((()=>(0,n._)("label",{for:"formChildCount",class:"form-label"},"Nombre d'enfants",-1))),O={class:"mb-3 profilePageField"},W=l((()=>(0,n._)("label",{for:"formNationality",class:"form-label"},"Nationalité",-1))),Z={class:"mb-3 profilePageField"},G=l((()=>(0,n._)("label",{for:"formWorkStatus",class:"form-label"},"Situation professionnelle",-1))),J=(0,n.uE)('<option value="" data-v-5bd53342>Aujourd&#39;hui vous êtes ...</option><option value="Employé" data-v-5bd53342>Employé</option><option value="Ouvrier" data-v-5bd53342>Ouvrier</option><option value="Cadre" data-v-5bd53342>Cadre</option><option value="Fonctionnaire" data-v-5bd53342>Fonctionnaire</option><option value="Enseignant" data-v-5bd53342>Enseignant</option><option value="Artisan commerçant" data-v-5bd53342>Artisan commerçant</option><option value="Chef d&#39;entreprise" data-v-5bd53342>Chef d&#39;entreprise</option><option value="Profession libérale" data-v-5bd53342>Profession libérale</option><option value="Profession libérale médicale" data-v-5bd53342>Profession libérale médicale</option><option value="Travailleur indépendant" data-v-5bd53342>Travailleur indépendant</option><option value="Congé parental" data-v-5bd53342>Congé parental</option><option value="Intermittent du spectacle" data-v-5bd53342>Intermittent du spectacle</option><option value="Agriculteur" data-v-5bd53342>Agriculteur</option><option value="Retraité" data-v-5bd53342>Retraité</option><option value="Etudiant" data-v-5bd53342>Etudiant</option><option value="Sans emploi" data-v-5bd53342>Sans emploi</option><option value="Autre" data-v-5bd53342>Autre</option>',18),X=[J],Y={class:"mb-3 profilePageField"},K=l((()=>(0,n._)("label",{for:"formWorkContract",class:"form-label"},"Contrat",-1))),Q=(0,n.uE)('<option value="" data-v-5bd53342>Aujourd&#39;hui vous travaillez en ...</option><option value="CDI" data-v-5bd53342>CDI</option><option value="CDI Probatoire" data-v-5bd53342>CDI Probatoire</option><option value="CDD" data-v-5bd53342>CDD</option><option value="Intérim" data-v-5bd53342>Intérim</option><option value="Autre" data-v-5bd53342>Autre</option>',6),ee=[Q],te={class:"mb-3 profilePageField"},oe=l((()=>(0,n._)("label",{for:"formWorkLength",class:"form-label"},"En poste depuis",-1))),ne=["min"],ie={class:"mb-3 profilePageField"},le=l((()=>(0,n._)("label",{for:"formMainBank",class:"form-label"},"Banque principale",-1))),re={class:"mb-3 profilePageField"},ae=l((()=>(0,n._)("label",{for:"formMonthlyRevenue",class:"form-label"},"Revenu mensuel (€)",-1))),se={class:"mb-3 profilePageField"},ue=l((()=>(0,n._)("label",{for:"formAnnualPrime",class:"form-label"},"Prime annuelle (€) (Optionnel)",-1))),de=l((()=>(0,n._)("button",{type:"submit",class:"btn btn-primary",id:"saveButton"},"Mettre à jour",-1))),ce={key:0,id:"userEditSuccessMessage"},pe={id:"filesList"};function me(e,t,o,l,_,y){const g=(0,n.up)("HeaderComponent"),I=(0,n.up)("client-file-list");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(g),(0,n._)("div",a,[(0,n._)("form",{id:"profileForm",onSubmit:t[20]||(t[20]=(...e)=>y.handlePatchUserInfo&&y.handlePatchUserInfo(...e))},[s,(0,n._)("div",u,[(0,n._)("div",d,[c,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formName","onUpdate:modelValue":t[0]||(t[0]=e=>_.userInfo.nom=e),placeholder:"Votre nom",required:"",disabled:""},null,512),[[i.nr,_.userInfo.nom]])]),(0,n._)("div",p,[m,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formFirstName","onUpdate:modelValue":t[1]||(t[1]=e=>_.userInfo.prenom=e),placeholder:"Votre prénom",required:"",disabled:""},null,512),[[i.nr,_.userInfo.prenom]])]),(0,n._)("div",f,[h,(0,n.wy)((0,n._)("input",{type:"email",class:"form-control",id:"formEmail","onUpdate:modelValue":t[2]||(t[2]=e=>_.userInfo.email=e),placeholder:"Votre adresse email",required:"",disabled:""},null,512),[[i.nr,_.userInfo.email]])]),(0,n._)("div",b,[v,(0,n.wy)((0,n._)("select",{class:"form-select","aria-label":"Default select example",id:"formGenre","onUpdate:modelValue":t[3]||(t[3]=e=>_.userInfo.genre=e),required:""},w,512),[[i.bM,_.userInfo.genre]])]),(0,n._)("div",F,[C,(0,n.wy)((0,n._)("input",{type:"date",class:"form-control",id:"formBirthDate","onUpdate:modelValue":t[4]||(t[4]=e=>_.userInfo.date_birth=e),required:""},null,512),[[i.nr,_.userInfo.date_birth]])]),(0,n._)("div",D,[V,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formTelephone","onUpdate:modelValue":t[5]||(t[5]=e=>_.userInfo.tel=e),placeholder:"Votre numéro",required:""},null,512),[[i.nr,_.userInfo.tel]])]),(0,n._)("div",S,[U,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formCountry","onUpdate:modelValue":t[6]||(t[6]=e=>_.userInfo.pays=e),placeholder:"Votre ville de résidence",required:""},null,512),[[i.nr,_.userInfo.pays]])]),(0,n._)("div",E,[P,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formCity","onUpdate:modelValue":t[7]||(t[7]=e=>_.userInfo.ville=e),placeholder:"Votre ville de résidence",required:""},null,512),[[i.nr,_.userInfo.ville]])]),(0,n._)("div",k,[A,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formAddress","onUpdate:modelValue":t[8]||(t[8]=e=>_.userInfo.adresse=e),placeholder:"Votre adresse",required:""},null,512),[[i.nr,_.userInfo.adresse]])]),(0,n._)("div",q,[x,(0,n.wy)((0,n._)("select",{class:"form-select","aria-label":"Default select example",id:"formHousingStatus","onUpdate:modelValue":t[9]||(t[9]=e=>_.userInfo.status_immo=e),required:""},N,512),[[i.bM,_.userInfo.status_immo]])]),(0,n._)("div",R,[j,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",id:"formCurrentRent","onUpdate:modelValue":t[10]||(t[10]=e=>_.userInfo.loyer_actuel=e),placeholder:"Votre loyer actuel",required:""},null,512),[[i.nr,_.userInfo.loyer_actuel]])]),(0,n._)("div",M,[z,(0,n.wy)((0,n._)("select",{class:"form-select","aria-label":"Default select example",id:"formFamilyStatus","onUpdate:modelValue":t[11]||(t[11]=e=>_.userInfo.situation_familiale=e),required:""},B,512),[[i.bM,_.userInfo.situation_familiale]])]),(0,n._)("div",H,[$,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",id:"formChildCount",min:"0","onUpdate:modelValue":t[12]||(t[12]=e=>_.userInfo.nombre_enfant=e),required:""},null,512),[[i.nr,_.userInfo.nombre_enfant]])]),(0,n._)("div",O,[W,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formNationality","onUpdate:modelValue":t[13]||(t[13]=e=>_.userInfo.nationalite=e),placeholder:"Votre nationalité",required:""},null,512),[[i.nr,_.userInfo.nationalite]])]),(0,n._)("div",Z,[G,(0,n.wy)((0,n._)("select",{class:"form-select","aria-label":"Default select example",id:"formWorkStatus","onUpdate:modelValue":t[14]||(t[14]=e=>_.userInfo.situation_professionnelle=e),required:""},X,512),[[i.bM,_.userInfo.situation_professionnelle]])]),(0,n._)("div",Y,[K,(0,n.wy)((0,n._)("select",{class:"form-select","aria-label":"Default select example",id:"formWorkContract","onUpdate:modelValue":t[15]||(t[15]=e=>_.userInfo.contrat=e),required:""},ee,512),[[i.bM,_.userInfo.contrat]])]),(0,n._)("div",te,[oe,(0,n.wy)((0,n._)("input",{type:"date",class:"form-control",id:"formWorkLength",min:this.userInfo.date_birth,max:"2023-06-19","onUpdate:modelValue":t[16]||(t[16]=e=>_.userInfo.poste_depuis=e),required:""},null,8,ne),[[i.nr,_.userInfo.poste_depuis]])]),(0,n._)("div",ie,[le,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"formMainBank","onUpdate:modelValue":t[17]||(t[17]=e=>_.userInfo.banque_principale=e),placeholder:"Votre banque principale",required:""},null,512),[[i.nr,_.userInfo.banque_principale]])]),(0,n._)("div",re,[ae,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",id:"formMonthlyRevenue","onUpdate:modelValue":t[18]||(t[18]=e=>_.userInfo.revenu_mensuel=e),required:""},null,512),[[i.nr,_.userInfo.revenu_mensuel]])]),(0,n._)("div",se,[ue,(0,n.wy)((0,n._)("input",{type:"number",class:"form-control",id:"formAnnualPrime","onUpdate:modelValue":t[19]||(t[19]=e=>_.userInfo.prime_annuelle=e)},null,512),[[i.nr,_.userInfo.prime_annuelle]])])]),de,_.userEditSuccess?((0,n.wg)(),(0,n.iD)("div",ce,"Your informations have been stored")):(0,n.kq)("",!0)],32),(0,n._)("div",pe,[(0,n.Wm)(I)])])])}o(7658);var fe=o(1042),he=o(5366),be={components:{HeaderComponent:fe.Z,ClientFileList:he.Z},data(){return{userFiles:[],userInfo:{nom:"",prenom:"",email:"",genre:"",date_birth:"",tel:"",pays:"",ville:"",adresse:"",status_immo:"",situation_professionnelle:"",contrat:"",poste_depuis:"",banque_principale:"",situation_familiale:"",nationalite:"",revenu_mensuel:0,prime_annuelle:0,loyer_actuel:0,nombre_enfant:0},userEditSuccess:!1}},methods:{handlePatchUserInfo(e){""!=this.userInfo&&""!=this.userInfo.nom&&""!=this.userInfo.prenom&&""!=this.userInfo.email&&""!=this.userInfo.genre&&""!=this.userInfo.date_birth&&""!=this.userInfo.tel&&""!=this.userInfo.pays&&""!=this.userInfo.ville&&""!=this.userInfo.adresse&&""!=this.userInfo.status_immo&&""!=this.userInfo.situation_professionnelle&&""!=this.userInfo.contrat&&""!=this.userInfo.poste_depuis&&""!=this.userInfo.banque_principale&&""!=this.userInfo.situation_familiale&&""!=this.userInfo.nationalite?(e.preventDefault(),fetch(this.api_url+"client/patchClient",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(this.userInfo)}).then((e=>{if(e.ok)return e.json();throw new Error("Something went wrong")})).then((e=>{console.log(e),this.$notify({title:"Success",text:"Vos informations ont été mises à jour",type:"success"})})).catch((e=>{console.log(e),this.$notify({title:"Error",text:"Il y a eu une erreur lors de la mise à jour de vos informations",type:"error"})}))):this.$notify({title:"Erreur",text:"Veuillez remplir tous les champs obligatoires",type:"error"})},fetchUserData(){fetch(this.api_url+"client/getClient",{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();if(401!=e.status)throw new Error("Something went wrong");this.$router.push("/login/client")})).then((e=>{console.log(e),this.userInfo=e;for(const t in this.userInfo)"date_birth"==t||"poste_depuis"==t?this.userInfo[t]=this.userInfo[t]?.split("T")[0]:null==this.userInfo[t]&&(this.userInfo[t]="nombre_enfant"==t||"revenu_mensuel"==t||"prime_annuelle"==t||"loyer_actuel"==t?0:"")})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de la récupération de vos informations",type:"error"})}))}},mounted(){this.fetchUserData()}},ve=o(89);const _e=(0,ve.Z)(be,[["render",me],["__scopeId","data-v-5bd53342"]]);var ye=_e}}]);
//# sourceMappingURL=808.0563407f.js.map