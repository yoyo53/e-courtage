"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[258],{3258:function(n,l,e){e.r(l),e.d(l,{default:function(){return nn}});var t=e(3396),i=e(9242);const a={id:"main-body"},s=(0,t._)("h3",null,"Liste des clients :",-1),o={id:"clients-overview-area",class:"section-list"},u={id:"clients-area-header"},c={id:"search-input",class:"input-group flex-nowrap"},p={id:"clients-list-container"},r={id:"clients-list",class:"section-list"};function d(n,l,e,d,_,m){const h=(0,t.up)("HeaderComponent"),w=(0,t.up)("clients-list-element");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",null,[(0,t.Wm)(h)]),(0,t._)("div",a,[s,(0,t._)("div",o,[(0,t._)("div",u,[(0,t._)("div",c,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":l[0]||(l[0]=n=>_.searchInput=n)},null,512),[[i.nr,_.searchInput]])])]),(0,t._)("div",p,[(0,t._)("ul",r,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(_.clients,(n=>((0,t.wg)(),(0,t.j4)(w,{onUpdateClient:l[1]||(l[1]=n=>m.fetchClients()),key:n.id,client:n},null,8,["client"])))),128))])])])])])}var _=e(7139);const m={id:"buttons_options",style:{"padding-top":"10px"}},h=(0,t._)("path",{fill:"red",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1),w=[h],f={id:"clientName"},v={class:"clientRow"};function z(n,l,e,i,a,s){const o=(0,t.up)("admin-client-detail");return(0,t.wg)(),(0,t.iD)("div",{id:"clientListElement",class:(0,_.C_)(s.borderClass)},[(0,t._)("div",m,[((0,t.wg)(),(0,t.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16",onClick:l[0]||(l[0]=n=>s.deleteClient(e.client.id_client,e.client.account_status)),style:{cursor:"pointer"}},w))]),(0,t._)("span",f,(0,_.zw)(e.client.nom)+" "+(0,_.zw)(e.client.prenom),1),(0,t._)("div",v,[(0,t._)("span",null," ID : "+(0,_.zw)(e.client.id_client),1)]),(0,t.Wm)(o,{client:e.client},null,8,["client"])],2)}const g={key:0,id:"modal-form",ref:"modalForm"},y=(0,t._)("h2",null,"Informations du compte client",-1),b={id:"client",class:"clientDetailDivision"},C=(0,t._)("span",null,"Nom : ",-1),D=(0,t._)("span",null,"Prénom : ",-1),k=(0,t._)("span",null,"Email : ",-1),I=(0,t._)("span",null,"Genre : ",-1),L=(0,t._)("span",null,"Date de naissance : ",-1),S=(0,t._)("span",null,"Téléphone : ",-1),E=(0,t._)("span",null,"Pays : ",-1),x=(0,t._)("span",null,"Ville : ",-1),A=(0,t._)("span",null,"Adresse : ",-1),P=(0,t._)("span",null,"Status immobilier : ",-1),j=(0,t._)("span",null,"Situation professionnelle : ",-1),q=(0,t._)("span",null,"Contrat : ",-1),B=(0,t._)("span",null,"Poste depuis : ",-1),H=(0,t._)("span",null,"Banque principale : ",-1),N=(0,t._)("span",null,"Situation familiale : ",-1),R=(0,t._)("span",null,"Nationalité : ",-1),T=(0,t._)("span",null,"Revenu mensuel : ",-1),U=(0,t._)("span",null,"Prime annuelle : ",-1),V=(0,t._)("span",null,"Loyer actuel : ",-1),Z=(0,t._)("span",null,"Nombre d'enfants : ",-1);function M(n,l,e,i,a,s){return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("button",{id:"detailButton",onClick:l[0]||(l[0]=n=>s.handleDisplay())},"Détails"),a.displayDetail?((0,t.wg)(),(0,t.iD)("div",g,[(0,t._)("button",{id:"closeButton",onClick:l[1]||(l[1]=n=>s.handleDisplay())},"X"),y,(0,t._)("div",b,[(0,t._)("p",null,[C,(0,t._)("span",null,(0,_.zw)(e.client.nom),1)]),(0,t._)("p",null,[D,(0,t._)("span",null,(0,_.zw)(e.client.prenom),1)]),(0,t._)("p",null,[k,(0,t._)("span",null,(0,_.zw)(e.client.email),1)]),(0,t._)("p",null,[I,(0,t._)("span",null,(0,_.zw)(e.client.genre),1)]),(0,t._)("p",null,[L,(0,t._)("span",null,(0,_.zw)(e.client.date_birth),1)]),(0,t._)("p",null,[S,(0,t._)("span",null,(0,_.zw)(e.client.tel),1)]),(0,t._)("p",null,[E,(0,t._)("span",null,(0,_.zw)(e.client.pays),1)]),(0,t._)("p",null,[x,(0,t._)("span",null,(0,_.zw)(e.client.ville),1)]),(0,t._)("p",null,[A,(0,t._)("span",null,(0,_.zw)(e.client.adresse),1)]),(0,t._)("p",null,[P,(0,t._)("span",null,(0,_.zw)(e.client.status_immo),1)]),(0,t._)("p",null,[j,(0,t._)("span",null,(0,_.zw)(e.client.situation_professionnelle),1)]),(0,t._)("p",null,[q,(0,t._)("span",null,(0,_.zw)(e.client.contrat),1)]),(0,t._)("p",null,[B,(0,t._)("span",null,(0,_.zw)(e.client.poste_depuis),1)]),(0,t._)("p",null,[H,(0,t._)("span",null,(0,_.zw)(e.client.banque_principale),1)]),(0,t._)("p",null,[N,(0,t._)("span",null,(0,_.zw)(e.client.situation_familiale),1)]),(0,t._)("p",null,[R,(0,t._)("span",null,(0,_.zw)(e.client.nationalite),1)]),(0,t._)("p",null,[T,(0,t._)("span",null,(0,_.zw)(e.client.revenu_mensuel),1)]),(0,t._)("p",null,[U,(0,t._)("span",null,(0,_.zw)(e.client.prime_annuelle),1)]),(0,t._)("p",null,[V,(0,t._)("span",null,(0,_.zw)(e.client.loyer_actuel),1)]),(0,t._)("p",null,[Z,(0,t._)("span",null,(0,_.zw)(e.client.nombre_enfant),1)])])],512)):(0,t.kq)("",!0)])}var O={data(){return{displayDetail:!1}},props:{client:{type:Object,required:!0}},methods:{handleDisplay(){this.displayDetail=!this.displayDetail}}},W=e(89);const F=(0,W.Z)(O,[["render",M]]);var G=F,J={components:{"admin-client-detail":G},name:"clientsListElement",props:{client:{type:Object,required:!0}},computed:{borderClass(){return this.client.account_status?"active-border":this.client.account_status?"":"inactive-border"}},methods:{handleDisplayDetail(){alert("WIP")},async deleteClient(n,l){if(confirm("Voulez-vous vraiment supprimer/bannir ce client ?")){if(l){const l=localStorage.getItem("token");await fetch(this.api_url+"admin/updateClient/"+n,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:l},body:JSON.stringify({account_status:!1})})}else{const l=localStorage.getItem("token");await fetch(this.api_url+"admin/deleteClient/"+n,{method:"DELETE",headers:{Authorization:l}})}this.$emit("updateClient")}}}};const K=(0,W.Z)(J,[["render",z]]);var X=K,Y=e(7275),$={name:"BankHomeView",components:{HeaderComponent:Y.Z,ClientsListElement:X},data(){return{clients:[],searchInput:""}},watch:{searchInput(n){console.log(n),this.performSearch()}},methods:{async fetchClients(){const n=localStorage.getItem("token"),l=await fetch(this.api_url+"admin/getAllClients",{headers:{authorization:n}}),e=await l.json();console.log(e),this.clients=e},performSearch(){}},mounted(){console.log("Mounted"),this.fetchClients()},beforeUnmount(){console.log("Unmounted")}};const Q=(0,W.Z)($,[["render",d]]);var nn=Q}}]);
//# sourceMappingURL=258.f16f8fd9.js.map