"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[641],{3641:function(n,e,l){l.r(e),l.d(e,{default:function(){return on}});var t=l(3396),i=l(9242);const a=n=>((0,t.dD)("data-v-cb38eca2"),n=n(),(0,t.Cn)(),n),s={id:"content"},o={id:"links"},u={id:"main-body"},c=a((()=>(0,t._)("h3",null,"Liste des clients :",-1))),r={id:"clients-overview-area",class:"section-list"},p={id:"clients-area-header"},d={id:"search-input",class:"input-group flex-nowrap"},_={id:"clients-list-container"},m={id:"clients-list",class:"section-list"};function h(n,e,l,a,h,w){const f=(0,t.up)("HeaderComponent"),v=(0,t.up)("router-link"),C=(0,t.up)("clients-list-element");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",null,[(0,t.Wm)(f)]),(0,t._)("div",o,[(0,t.Wm)(v,{class:"link",to:"/admin/Banques"},{default:(0,t.w5)((()=>[(0,t.Uk)("Banques")])),_:1}),(0,t.Wm)(v,{class:"link",to:"/admin/Clients"},{default:(0,t.w5)((()=>[(0,t.Uk)("Clients")])),_:1}),(0,t.Wm)(v,{class:"link",to:"/admin/Demandes"},{default:(0,t.w5)((()=>[(0,t.Uk)("Demandes")])),_:1})]),(0,t._)("div",u,[c,(0,t._)("div",r,[(0,t._)("div",p,[(0,t._)("div",d,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":e[0]||(e[0]=n=>h.searchInput=n)},null,512),[[i.nr,h.searchInput]])])]),(0,t._)("div",_,[(0,t._)("ul",m,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(w.filteredClients,(n=>((0,t.wg)(),(0,t.j4)(C,{onUpdateClient:e[1]||(e[1]=n=>w.fetchClients()),key:n.id,client:n},null,8,["client"])))),128))])])])])])}var w=l(7139);const f=n=>((0,t.dD)("data-v-0d3c3f82"),n=n(),(0,t.Cn)(),n),v={id:"buttons_options",style:{"padding-top":"10px"}},C=f((()=>(0,t._)("path",{fill:"red",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1))),g=[C],D={id:"clientName"},b={class:"clientRow"};function y(n,e,l,i,a,s){const o=(0,t.up)("admin-client-detail");return(0,t.wg)(),(0,t.iD)("div",{id:"clientListElement",class:(0,w.C_)(s.borderClass)},[(0,t._)("div",v,[((0,t.wg)(),(0,t.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16",onClick:e[0]||(e[0]=n=>s.deleteClient(l.client.id_client,l.client.account_status)),style:{cursor:"pointer"}},g))]),(0,t._)("span",D,(0,w.zw)(l.client.nom)+" "+(0,w.zw)(l.client.prenom),1),(0,t._)("div",b,[(0,t._)("span",null," ID : "+(0,w.zw)(l.client.id_client),1)]),(0,t.Wm)(o,{client:l.client},null,8,["client"])],2)}const z=n=>((0,t.dD)("data-v-f780e3da"),n=n(),(0,t.Cn)(),n),k={key:0,id:"cover"},L={key:1,id:"modal-form",ref:"modalForm"},I=z((()=>(0,t._)("h2",null,"Informations du compte client",-1))),S={id:"client",class:"clientDetailDivision"},q=z((()=>(0,t._)("span",null,"Nom : ",-1))),E=z((()=>(0,t._)("span",null,"Prénom : ",-1))),A=z((()=>(0,t._)("span",null,"Email : ",-1))),B=z((()=>(0,t._)("span",null,"Genre : ",-1))),U=z((()=>(0,t._)("span",null,"Date de naissance : ",-1))),x=z((()=>(0,t._)("span",null,"Téléphone : ",-1))),H=z((()=>(0,t._)("span",null,"Pays : ",-1))),P=z((()=>(0,t._)("span",null,"Ville : ",-1))),W=z((()=>(0,t._)("span",null,"Adresse : ",-1))),j=z((()=>(0,t._)("span",null,"Status immobilier : ",-1))),N=z((()=>(0,t._)("span",null,"Situation professionnelle : ",-1))),R=z((()=>(0,t._)("span",null,"Contrat : ",-1))),T=z((()=>(0,t._)("span",null,"Poste depuis : ",-1))),V=z((()=>(0,t._)("span",null,"Banque principale : ",-1))),Z=z((()=>(0,t._)("span",null,"Situation familiale : ",-1))),O=z((()=>(0,t._)("span",null,"Nationalité : ",-1))),F=z((()=>(0,t._)("span",null,"Revenu mensuel : ",-1))),M=z((()=>(0,t._)("span",null,"Prime annuelle : ",-1))),G=z((()=>(0,t._)("span",null,"Loyer actuel : ",-1))),J=z((()=>(0,t._)("span",null,"Nombre d'enfants : ",-1)));function K(n,e,l,i,a,s){return(0,t.wg)(),(0,t.iD)("div",null,[a.displayDetail?((0,t.wg)(),(0,t.iD)("div",k)):(0,t.kq)("",!0),(0,t._)("button",{id:"detailButton",onClick:e[0]||(e[0]=n=>s.handleDisplay())},"Détails"),a.displayDetail?((0,t.wg)(),(0,t.iD)("div",L,[(0,t._)("button",{id:"closeButton",onClick:e[1]||(e[1]=n=>s.handleDisplay())},"X"),I,(0,t._)("div",S,[(0,t._)("p",null,[q,(0,t._)("span",null,(0,w.zw)(l.client.nom),1)]),(0,t._)("p",null,[E,(0,t._)("span",null,(0,w.zw)(l.client.prenom),1)]),(0,t._)("p",null,[A,(0,t._)("span",null,(0,w.zw)(l.client.email),1)]),(0,t._)("p",null,[B,(0,t._)("span",null,(0,w.zw)(l.client.genre),1)]),(0,t._)("p",null,[U,(0,t._)("span",null,(0,w.zw)(l.client.date_birth),1)]),(0,t._)("p",null,[x,(0,t._)("span",null,(0,w.zw)(l.client.tel),1)]),(0,t._)("p",null,[H,(0,t._)("span",null,(0,w.zw)(l.client.pays),1)]),(0,t._)("p",null,[P,(0,t._)("span",null,(0,w.zw)(l.client.ville),1)]),(0,t._)("p",null,[W,(0,t._)("span",null,(0,w.zw)(l.client.adresse),1)]),(0,t._)("p",null,[j,(0,t._)("span",null,(0,w.zw)(l.client.status_immo),1)]),(0,t._)("p",null,[N,(0,t._)("span",null,(0,w.zw)(l.client.situation_professionnelle),1)]),(0,t._)("p",null,[R,(0,t._)("span",null,(0,w.zw)(l.client.contrat),1)]),(0,t._)("p",null,[T,(0,t._)("span",null,(0,w.zw)(l.client.poste_depuis),1)]),(0,t._)("p",null,[V,(0,t._)("span",null,(0,w.zw)(l.client.banque_principale),1)]),(0,t._)("p",null,[Z,(0,t._)("span",null,(0,w.zw)(l.client.situation_familiale),1)]),(0,t._)("p",null,[O,(0,t._)("span",null,(0,w.zw)(l.client.nationalite),1)]),(0,t._)("p",null,[F,(0,t._)("span",null,(0,w.zw)(l.client.revenu_mensuel),1)]),(0,t._)("p",null,[M,(0,t._)("span",null,(0,w.zw)(l.client.prime_annuelle),1)]),(0,t._)("p",null,[G,(0,t._)("span",null,(0,w.zw)(l.client.loyer_actuel),1)]),(0,t._)("p",null,[J,(0,t._)("span",null,(0,w.zw)(l.client.nombre_enfant),1)])])],512)):(0,t.kq)("",!0)])}var X={data(){return{displayDetail:!1}},props:{client:{type:Object,required:!0}},methods:{handleDisplay(){this.displayDetail=!this.displayDetail}}},Y=l(89);const $=(0,Y.Z)(X,[["render",K],["__scopeId","data-v-f780e3da"]]);var Q=$,nn={components:{"admin-client-detail":Q},name:"clientsListElement",props:{client:{type:Object,required:!0}},computed:{borderClass(){return this.client.account_status?"active-border":this.client.account_status?"":"inactive-border"}},methods:{handleDisplayDetail(){alert("WIP")},async deleteClient(n,e){if(confirm("Voulez-vous vraiment supprimer/bannir ce client ?")){if(e){const e=localStorage.getItem("token");await fetch(this.api_url+"admin/updateClient/"+n,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify({account_status:!1})})}else{const e=localStorage.getItem("token");await fetch(this.api_url+"admin/deleteClient/"+n,{method:"DELETE",headers:{Authorization:e}})}this.$emit("updateClient")}}}};const en=(0,Y.Z)(nn,[["render",y],["__scopeId","data-v-0d3c3f82"]]);var ln=en,tn=l(1042),an={name:"BankHomeView",components:{HeaderComponent:tn.Z,ClientsListElement:ln},data(){return{clients:[],searchInput:""}},computed:{filteredClients(){if(this.searchInput){const n=this.searchInput.toLowerCase();return this.clients.filter((e=>e.nom.toLowerCase().includes(n)||e.prenom.toLowerCase().includes(n)||e.id_client.toString().toLowerCase().includes(n)))}return this.clients}},methods:{async fetchClients(){const n=localStorage.getItem("token"),e=await fetch(this.api_url+"admin/getAllClients",{headers:{authorization:n}}),l=await e.json();l.forEach((n=>{null!=n.date_birth&&(n.date_birth=new Date(n.date_birth).toLocaleDateString()),null!=n.poste_depuis&&(n.poste_depuis=new Date(n.poste_depuis).toLocaleDateString()),"1"==n.genre?n.genre="Homme":"2"==n.genre?n.genre="Femme":"3"==n.genre&&(n.genre="Autre")})),this.clients=l}},mounted(){this.fetchClients()},beforeUnmount(){console.log("Unmounted")}};const sn=(0,Y.Z)(an,[["render",h],["__scopeId","data-v-cb38eca2"]]);var on=sn}}]);
//# sourceMappingURL=641.c1f252ff.js.map