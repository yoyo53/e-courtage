"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[199],{199:function(e,n,d){d.r(n),d.d(n,{default:function(){return E}});var a=d(3396),t=d(9242);const s=(0,a._)("h1",null,"Admin Demandes Page",-1),i={id:"main-body"},o=(0,a._)("h3",null,"Liste des demandes :",-1),l={id:"demandes-overview-area",class:"section-list"},m={id:"demandes-area-header"},r={id:"search-input",class:"input-group flex-nowrap"},c={id:"demandes-list-container"},u={id:"demandes-list",class:"section-list"};function p(e,n,d,p,h,_){const f=(0,a.up)("HeaderComponent"),w=(0,a.up)("admin-demandes-list-element");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[s,(0,a.Wm)(f)]),(0,a._)("div",i,[o,(0,a._)("div",l,[(0,a._)("div",m,[(0,a._)("div",r,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":n[0]||(n[0]=e=>h.searchInput=e)},null,512),[[t.nr,h.searchInput]])])]),(0,a._)("div",c,[(0,a._)("ul",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.demandes,(e=>((0,a.wg)(),(0,a.j4)(w,{onUpdateDemande:n[1]||(n[1]=e=>_.fetchDemandes()),key:e.id,demand:e},null,8,["demand"])))),128))])])])])],64)}var h=d(7139);const _={id:"buttons_options"},f={id:"demandName"},w={class:"demandRow"},v={class:"demandRow"};function D(e,n,d,t,s,i){const o=(0,a.up)("bank-demand-detail");return(0,a.wg)(),(0,a.iD)("div",{id:"demandListElement",class:(0,h.C_)(e.borderClass)},[(0,a._)("div",_,[(0,a._)("span",null,[(0,a._)("p",{id:"delete",class:"but",onClick:n[0]||(n[0]=e=>i.deleteDemande(d.demand.id_demande))},"x")])]),(0,a._)("span",f," Sujet : "+(0,h.zw)(d.demand.sujet),1),(0,a._)("div",w,[(0,a._)("span",null," Nature : "+(0,h.zw)(d.demand.nature),1)]),(0,a._)("div",v,[(0,a._)("span",null," ID : "+(0,h.zw)(d.demand.id_demande),1)]),(0,a.Wm)(o,{demand:d.demand},null,8,["demand"])],2)}var g={name:"demandesListElement",props:{demand:{type:Object,required:!0}},methods:{handleDisplayDetail(){alert("WIP")},async deleteDemande(e){if(confirm("Voulez-vous vraiment supprimer cette demande ?")){const n=localStorage.getItem("token");await fetch(this.api_url+"admin/deleteDemande/"+e,{method:"DELETE",headers:{Authorization:n}}),this.$emit("updateDemande")}}}},b=d(89);const k=(0,b.Z)(g,[["render",D]]);var y=k,I=d(7275),C={name:"BankHomeView",components:{HeaderComponent:I.Z,AdminDemandesListElement:y},data(){return{demandes:[],searchInput:""}},watch:{searchInput(e){console.log(e),this.performSearch()}},methods:{async fetchDemandes(){const e=localStorage.getItem("token"),n=await fetch(this.api_url+"admin/getAllDemandes",{headers:{authorization:e}}),d=await n.json();console.log(d),this.demandes=d},performSearch(){}},mounted(){console.log("Mounted"),this.fetchDemandes()},beforeUnmount(){console.log("Unmounted")}};const z=(0,b.Z)(C,[["render",p]]);var E=z}}]);
//# sourceMappingURL=199.1493d62b.js.map