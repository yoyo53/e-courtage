"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[107],{4107:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var i=n(3396),l=n(9242);const s=e=>((0,i.dD)("data-v-4378fdb8"),e=e(),(0,i.Cn)(),e),a={id:"links"},o={id:"main-body"},c=s((()=>(0,i._)("h3",null,"Liste des clients :",-1))),d={id:"clients-overview-area",class:"section-list"},r={id:"clients-area-header"},u={id:"search-input",class:"input-group flex-nowrap"},m={id:"clients-list-container"},p={id:"clients-list",class:"section-list"};function h(e,t,n,s,h,_){const f=(0,i.up)("HeaderComponent"),C=(0,i.up)("router-link"),w=(0,i.up)("clients-list-element");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",null,[(0,i.Wm)(f)]),(0,i._)("div",a,[(0,i.Wm)(C,{class:"link",to:"/admin/Banques"},{default:(0,i.w5)((()=>[(0,i.Uk)("Banques")])),_:1}),(0,i.Wm)(C,{class:"link",to:"/admin/Clients"},{default:(0,i.w5)((()=>[(0,i.Uk)("Clients")])),_:1}),(0,i.Wm)(C,{class:"link",to:"/admin/Demandes"},{default:(0,i.w5)((()=>[(0,i.Uk)("Demandes")])),_:1})]),(0,i._)("div",o,[c,(0,i._)("div",d,[(0,i._)("div",r,[(0,i._)("div",u,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":t[0]||(t[0]=e=>h.searchInput=e)},null,512),[[l.nr,h.searchInput]])])]),(0,i._)("div",m,[(0,i._)("ul",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(_.filteredClients,(e=>((0,i.wg)(),(0,i.j4)(w,{onUpdateClient:t[1]||(t[1]=e=>_.fetchClients()),key:e.id,client:e},null,8,["client"])))),128))])])])])])}var _=n(7139);const f={id:"buttons_options"},C={id:"clientName"},w={class:"clientRow"};function v(e,t,n,l,s,a){const o=(0,i.up)("bank-demand-detail");return(0,i.wg)(),(0,i.iD)("div",{id:"clientListElement",class:(0,_.C_)(a.borderClass)},[(0,i._)("div",f,[(0,i._)("span",null,[(0,i._)("p",{id:"delete",class:"but",onClick:t[0]||(t[0]=e=>a.deleteClient(n.client.id_client,n.client.account_status))},"x")])]),(0,i._)("span",C,(0,_.zw)(n.client.nom)+" "+(0,_.zw)(n.client.prenom),1),(0,i._)("div",w,[(0,i._)("span",null," ID : "+(0,_.zw)(n.client.id_client),1)]),(0,i.Wm)(o,{demand:e.demand},null,8,["demand"])],2)}var b={name:"clientsListElement",props:{client:{type:Object,required:!0}},computed:{borderClass(){return this.client.account_status?"active-border":this.client.account_status?"":"inactive-border"}},methods:{handleDisplayDetail(){alert("WIP")},async deleteClient(e,t){if(confirm("Voulez-vous vraiment supprimer/bannir ce client ?")){if(t){const t=localStorage.getItem("token");await fetch(this.api_url+"admin/updateClient/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({account_status:!1})})}else{const t=localStorage.getItem("token");await fetch(this.api_url+"admin/deleteClient/"+e,{method:"DELETE",headers:{Authorization:t}})}this.$emit("updateClient")}}}},k=n(89);const g=(0,k.Z)(b,[["render",v]]);var y=g,I=n(9718),D={name:"BankHomeView",components:{HeaderComponent:I.Z,ClientsListElement:y},data(){return{clients:[],searchInput:""}},computed:{filteredClients(){if(this.searchInput){const e=this.searchInput.toLowerCase();return this.clients.filter((t=>t.nom.toLowerCase().includes(e)||t.prenom.toLowerCase().includes(e)||t.id_client.toString().toLowerCase().includes(e)))}return this.clients}},methods:{async fetchClients(){const e=localStorage.getItem("token"),t=await fetch(this.api_url+"admin/getAllClients",{headers:{authorization:e}}),n=await t.json();this.clients=n}},mounted(){this.fetchClients()},beforeUnmount(){console.log("Unmounted")}};const L=(0,k.Z)(D,[["render",h],["__scopeId","data-v-4378fdb8"]]);var z=L}}]);
//# sourceMappingURL=107.fd706b78.js.map