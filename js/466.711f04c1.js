(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[466],{7045:function(e,t,n){var a=n(6339),o=n(3070);e.exports=function(e,t,n){return n.get&&a(n.get,t,{getter:!0}),n.set&&a(n.set,t,{setter:!0}),o.f(e,t,n)}},2062:function(e,t,n){"use strict";var a=n(9781),o=n(1702),i=n(7045),l=URLSearchParams.prototype,s=o(l.forEach);a&&!("size"in l)&&i(l,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},5366:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var a=n(3396),o=n(7139);const i=e=>((0,a.dD)("data-v-70020e16"),e=e(),(0,a.Cn)(),e),l={id:"clientFileListComponent"},s=i((()=>(0,a._)("h2",{style:{"margin-bottom":"30px"}},"Vos fichiers",-1))),r={id:"clientFileList"},d={class:"list-group"},u={class:"fileRowText"},m={id:"fileRowTextName"},c={class:"fileRowButtons"},p=["onClick"],f=["onClick"],h=["onClick"];function v(e,t,n,i,v,_){const b=(0,a.up)("client-new-file-form");return(0,a.wg)(),(0,a.iD)("div",l,[s,(0,a._)("div",r,[(0,a._)("ul",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v.userFiles,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"fileRow list-group-item",key:e.name},[(0,a._)("div",u,[(0,a._)("span",m,(0,o.zw)(e.nom_document),1),(0,a._)("span",null,(0,o.zw)(e.type),1)]),(0,a._)("div",c,[(0,a._)("button",{class:"btn btn-success fileRowButton",onClick:()=>_.handleDownload(e.id_document,e.nom_document)},"Télécharger",8,p),(0,a._)("button",{class:"btn btn-light fileRowButton",onClick:()=>_.handleUpdate(e.id_document)},"Remplacer",8,f),(0,a._)("button",{class:"btn btn-danger fileRowButton",onClick:()=>_.handleDelete(e.id_document)},"Supprimer",8,h)])])))),128))])]),(0,a.Wm)(b)])}n(2062),n(7658);var _=n(9620),b={components:{ClientNewFileForm:_.Z},name:"ClientFileList",data(){return{userFiles:[]}},methods:{handleDownload(e,t){console.log(e),fetch(this.api_url+"document/downloadDocument/"+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.blob();throw new Error("Something went wrong")})).then((e=>{console.log(e);const n=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=n,a.setAttribute("download",t),document.body.appendChild(a),a.click()}))},handleUpdate(e){let t=this;console.log(e);const n=document.createElement("input");n.type="file",n.ref="file",n.click(),n.onchange=()=>{const a=new FormData;console.log(n),a.append("file",n.files[0]);let o=new XMLHttpRequest;o.open("PATCH",this.api_url+"document/updateDocument/"+e,!0),o.setRequestHeader("Authorization",localStorage.getItem("token")),o.send(a),o.onload=function(){200==o.status?(console.log("File uploaded"),t.userFiles.find((t=>t.id_document===e)).nom_document=n.files[0].name,t.$notify({title:"Succès",text:"Votre fichier a été mis à jour",type:"success"})):(console.log("Error "+o.status+" occurred when trying to upload your file."),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de la mise à jour de votre fichier",type:"error"}))}}},handleDelete(e){confirm("Voulez-vous vraiment supprimer ce fichier ?")&&(console.log(e),fetch(this.api_url+"document/deleteDocument/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();throw new Error("Une erreur est survenue lors de la suppression de votre fichier")})).then((t=>{console.log(t),this.userFiles=this.userFiles.filter((t=>t.id_document!==e)),this.$notify({title:"Succès",text:"Votre fichier a été supprimé",type:"success"})})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de la suppression de votre fichier",type:"error"})})))},fetchUserFiles(){fetch(this.api_url+"document/getAllDocuments",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();if(401!=e.status)throw new Error("Une erreur est survenue lors de la récupération de vos fichiers");this.$router.push("/login/client")})).then((e=>{console.log(e),this.userFiles=e;for(let t=0;t<this.userFiles.length;t++)null==this.userFiles[t].type&&(this.userFiles[t].type="Non spécifié")})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de la récupération de vos fichiers",type:"error"})}))}},mounted(){this.fetchUserFiles()}},D=n(89);const y=(0,D.Z)(b,[["render",v],["__scopeId","data-v-70020e16"]]);var w=y},9620:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var a=n(3396),o=n(9242);const i=e=>((0,a.dD)("data-v-5c86df52"),e=e(),(0,a.Cn)(),e),l={key:0,id:"cover"},s={key:1,id:"modal-file-form",ref:"modalForm"},r=i((()=>(0,a._)("h2",null,"Nouveau document",-1))),d={id:"newFileFormFields"},u={class:"mb-3"},m=i((()=>(0,a._)("label",{for:"formFile",class:"form-label"},"Votre fichier",-1))),c={class:"mb-3"},p=i((()=>(0,a._)("label",{for:"formNameTitle",class:"form-label"},"Nom du fichier",-1))),f={class:"mb-3"},h=i((()=>(0,a._)("label",{for:"formDocType",class:"form-label"},"Genre",-1))),v=(0,a.uE)('<option value="" data-v-5c86df52>Selectionnez le type du fichier</option><option value="Document d&#39;identité" data-v-5c86df52>Document d&#39;identité</option><option value="Fiche de paie" data-v-5c86df52>Fiche de paie</option><option value="Document médical" data-v-5c86df52>Document médical</option><option value="Justificatif de domicile" data-v-5c86df52>Justificatif de domicile</option><option value="Autre" data-v-5c86df52>Autre</option>',6),_=[v],b=i((()=>(0,a._)("button",{type:"submit",class:"btn btn-success"},"Envoyer",-1)));function D(e,t,n,i,v,D){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{type:"button",id:"openNFButton",onClick:t[0]||(t[0]=(...e)=>D.handleDisplay&&D.handleDisplay(...e))},"NOUVEAU DOCUMENT"),v.displayForm?((0,a.wg)(),(0,a.iD)("div",l)):(0,a.kq)("",!0),v.displayForm?((0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("button",{id:"closeButton",onClick:t[1]||(t[1]=(...e)=>D.handleDisplay&&D.handleDisplay(...e))},"X"),r,(0,a._)("form",{id:"newFileForm",onSubmit:t[6]||(t[6]=(...e)=>D.handleSubmit&&D.handleSubmit(...e))},[(0,a._)("div",d,[(0,a._)("div",u,[m,(0,a._)("input",{class:"form-control",type:"file",id:"formFile",onChange:t[2]||(t[2]=e=>D.onFilesChange(e)),required:""},null,32)]),(0,a._)("div",c,[p,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formNameTitle","onUpdate:modelValue":t[3]||(t[3]=e=>v.name=e),placeholder:"Nom du fichier",maxlength:"30",required:""},null,512),[[o.nr,v.name]])]),(0,a._)("div",f,[h,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formDocType","onUpdate:modelValue":t[4]||(t[4]=e=>v.type=e),required:""},_,512),[[o.bM,v.type]])])]),b,(0,a._)("button",{type:"button",class:"btn btn-warning",onClick:t[5]||(t[5]=(...e)=>D.handleDisplay&&D.handleDisplay(...e))},"Annuler")],32)],512)):(0,a.kq)("",!0)])}n(7658);var y={name:"ClientNewFileForm",data(){return{name:"",file:null,displayForm:!1,type:""}},methods:{onFilesChange(e){this.file=e.target.files[0]},handleSubmit(e){if(""==this.name||null==this.file||""==this.type)return;e.preventDefault();let t=new FormData;t.append("file",this.file),t.append("nom_document",this.name),t.append("type",this.type);let n=new XMLHttpRequest;n.open("POST",this.api_url+"document/addDocument"),n.setRequestHeader("Authorization",localStorage.getItem("token")),n.send(t),n.onload=()=>{if(200==n.status){let e=JSON.parse(n.response);console.log("File sent"),console.log(e.id_document),this.$parent.userFiles.push({nom_document:this.name+"."+this.file.name.split(".").pop(),id_document:e.id_document,type:this.type}),this.name="",this.file=null,this.type="",this.displayForm=!1,this.$notify({title:"Succès",text:"Votre document a bien été envoyé",type:"success"})}else console.log("Error while sending file"),this.$notify({title:"Erreur",text:"Une erreur est survenue lors de l'envoi du document",type:"error"})}},handleDisplay(){console.log("display"),this.displayForm=!this.displayForm}}},w=n(89);const g=(0,w.Z)(y,[["render",D],["__scopeId","data-v-5c86df52"]]);var C=g},8466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Un}});var a=n(3396),o=n(7139);const i=e=>((0,a.dD)("data-v-5303119c"),e=e(),(0,a.Cn)(),e),l={id:"content"},s={id:"main-body"},r={id:"body-left"},d={id:"profile-overview-area"},u=i((()=>(0,a._)("h2",null,"Votre profil :",-1))),m={id:"profile-list",class:"section-list"},c={class:"profile-item"},p=i((()=>(0,a._)("span",null,"Nom :",-1))),f={class:"profile-item"},h=i((()=>(0,a._)("span",null,"Prénom :",-1))),v={class:"profile-item"},_=i((()=>(0,a._)("span",null,"Date de Naissance :",-1))),b={class:"profile-item"},D=i((()=>(0,a._)("span",null,"Numéro de téléphone :",-1))),y={class:"profile-item"},w=i((()=>(0,a._)("span",null,"Adresse mail :",-1))),g={class:"profile-item"},C=i((()=>(0,a._)("span",null,"Profession :",-1))),A={class:"profile-item profile-buttons"},F={id:"notifications-view-area"},z=i((()=>(0,a._)("h2",null,"Vos notifications :",-1))),k={id:"notifications-list",class:"section-list"},x={id:"body-right"},V={id:"demands-overview-area"},j=i((()=>(0,a._)("h2",null,"Liste de vos demandes en cours :",-1))),E={id:"demands-list",class:"section-list"},U={id:"add-demand-area"};function q(e,t,n,i,q,S){const T=(0,a.up)("HeaderComponent"),N=(0,a.up)("client-file-list-modal"),$=(0,a.up)("router-link"),R=(0,a.up)("client-notification-list-element"),I=(0,a.up)("client-demands-list-element"),L=(0,a.up)("ClientDemandForm");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(T),(0,a._)("div",s,[(0,a._)("div",r,[(0,a._)("div",d,[u,(0,a._)("ul",m,[(0,a._)("li",c,[p,(0,a._)("span",null,(0,o.zw)(q.userData.nom),1)]),(0,a._)("li",f,[h,(0,a._)("span",null,(0,o.zw)(q.userData.prenom),1)]),(0,a._)("li",v,[_,(0,a._)("span",null,(0,o.zw)(q.userData.date_birth),1)]),(0,a._)("li",b,[D,(0,a._)("span",null,(0,o.zw)(q.userData.tel),1)]),(0,a._)("li",y,[w,(0,a._)("span",null,(0,o.zw)(q.userData.email),1)]),(0,a._)("li",g,[C,(0,a._)("span",null,(0,o.zw)(q.userData.situation_professionnelle),1)]),(0,a._)("li",A,[(0,a.Wm)(N),(0,a.Wm)($,{class:"btn btn-primary",to:"/client/profile"},{default:(0,a.w5)((()=>[(0,a.Uk)("Votre profil")])),_:1})])])]),(0,a._)("div",F,[z,(0,a._)("ul",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.userNotifications,(e=>((0,a.wg)(),(0,a.j4)(R,{key:e.id,notification:e},null,8,["notification"])))),128))])])]),(0,a._)("div",x,[(0,a._)("div",V,[j,(0,a._)("ul",E,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.userDemands,(e=>((0,a.wg)(),(0,a.j4)(I,{key:e.id_demande,demand:e},null,8,["demand"])))),128))])]),(0,a._)("div",U,[(0,a.Wm)(L,{id:"demand-form"})])])])])}n(7658);var S=n(9242);const T=e=>((0,a.dD)("data-v-bafaa202"),e=e(),(0,a.Cn)(),e),N={key:0,id:"cover"},$={key:1,id:"modal-form",ref:"modalForm"},R=T((()=>(0,a._)("h2",null,"Nouvelle demande",-1))),I={id:"demandCreationFormFields"},L={class:"mb-3"},M=T((()=>(0,a._)("label",{for:"formSubject",class:"form-label"},"Sujet",-1))),Z={class:"mb-3"},O=T((()=>(0,a._)("label",{for:"formNature",class:"form-label"},"Nature du projet ?",-1))),H=(0,a.uE)('<option value="" data-v-bafaa202>Choisissez la nature de votre projet</option><option value="Achat" data-v-bafaa202>Achat</option><option value="Construction" data-v-bafaa202>Construction</option><option value="Travaux" data-v-bafaa202>Travaux</option><option value="Autre" data-v-bafaa202>Autre</option>',5),B=[H],P={class:"mb-3"},G=T((()=>(0,a._)("label",{for:"formType",class:"form-label"},"Type de bien ?",-1))),W=(0,a.uE)('<option value="" data-v-bafaa202>Choisissez le type du bien</option><option value="Maison" data-v-bafaa202>Maison</option><option value="Appartement" data-v-bafaa202>Appartement</option><option value="Terrain" data-v-bafaa202>Terrain</option><option value="Autre" data-v-bafaa202>Autre</option>',5),J=[W],X={class:"mb-3"},K=T((()=>(0,a._)("label",{for:"formAge",class:"form-label"},"Age du bien ?",-1))),Y=T((()=>(0,a._)("option",{value:""},"Choisissez l'âge du bien",-1))),Q=T((()=>(0,a._)("option",{value:"Ancien"},"Ancien",-1))),ee=T((()=>(0,a._)("option",{value:"Neuf"},"Neuf",-1))),te=T((()=>(0,a._)("option",{value:"Vente sur plan"},"Vente sur plan",-1))),ne=[Y,Q,ee,te],ae={class:"mb-3"},oe=T((()=>(0,a._)("label",{for:"formPurpose",class:"form-label"},"Usage du bien ?",-1))),ie=(0,a.uE)('<option value="" data-v-bafaa202>Choisissez l&#39;usage du bien</option><option value="Résidence principale" data-v-bafaa202>Résidence principale</option><option value="Résidence secondaire" data-v-bafaa202>Résidence secondaire</option><option value="Investissement locatif" data-v-bafaa202>Investissement locatif</option><option value="Usage professionnel" data-v-bafaa202>Usage professionnel</option><option value="Usage mixte" data-v-bafaa202>Usage mixte</option><option value="Autre" data-v-bafaa202>Autre</option>',7),le=[ie],se={class:"mb-3"},re=T((()=>(0,a._)("label",{for:"formResearchStatus",class:"form-label"},"Ou en êtes vous dans votre recherche ?",-1))),de=(0,a.uE)('<option value="" data-v-bafaa202>Renseigner où vous en êtes dans votre recherche</option><option value="En recherche" data-v-bafaa202>En recherche</option><option value="Vous vous préparez à faire une offre" data-v-bafaa202>Vous vous préparez à faire une offre</option><option value="Vous avez déjà fait une offre" data-v-bafaa202>Vous avez déjà fait une offre</option><option value="Vous pensez bientôt signer compromi" data-v-bafaa202>Vous pensez bientôt signer compromis</option><option value="Vous avez déjà signé un compromis" data-v-bafaa202>Vous avez déjà signé un compromis</option><option value="Autre" data-v-bafaa202>Autre</option>',7),ue=[de],me={class:"mb-3"},ce=T((()=>(0,a._)("label",{for:"formCountry",class:"form-label"},"Dans quel pays se situe le bien ?",-1))),pe={class:"mb-3"},fe=T((()=>(0,a._)("label",{for:"formCity",class:"form-label"},"Dans quelle ville se situe le bien ?",-1))),he={class:"mb-3"},ve=T((()=>(0,a._)("label",{for:"formAcquisitionAmount",class:"form-label"},"Montant estimé de l'acquisition ?",-1))),_e={class:"mb-3"},be=T((()=>(0,a._)("label",{for:"formTravauxAmount",class:"form-label"},"Montant estimé des travaux ?",-1))),De={class:"mb-3"},ye=T((()=>(0,a._)("label",{for:"formNotaireAmount",class:"form-label"},"Frais de notaire ? (optionnel)",-1))),we={class:"mb-3"},ge=T((()=>(0,a._)("label",{for:"formAloneGroup",class:"form-label"},"Comment empruntez-vous ?",-1))),Ce=T((()=>(0,a._)("option",{value:""},"Vous empruntez seul ? En groupe ? ",-1))),Ae=T((()=>(0,a._)("option",{value:"1"},"Seul",-1))),Fe=T((()=>(0,a._)("option",{value:"2"},"Avec un co-emprunteur",-1))),ze=T((()=>(0,a._)("option",{value:"3"},"Autre",-1))),ke=[Ce,Ae,Fe,ze],xe={class:"mb-3"},Ve=T((()=>(0,a._)("label",{for:"formApport",class:"form-label"},"Votre apport personnel ?",-1))),je={class:"mb-3"},Ee=T((()=>(0,a._)("label",{for:"formComment",class:"form-label"},"Commentaires sur le projet ? (optionnel)",-1))),Ue={class:"mb-3"},qe=T((()=>(0,a._)("label",{for:"formFileMultiple",class:"form-label"},"Vos Fichiers",-1))),Se=T((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary"},"Envoyer",-1)));function Te(e,t,n,o,i,l){const s=(0,a.up)("ClientFileListCheckableElement"),r=(0,a.up)("client-new-file-form");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{id:"openButton",onClick:t[0]||(t[0]=(...e)=>l.handleDisplay&&l.handleDisplay(...e))},"NOUVELLE DEMANDE"),i.displayForm?((0,a.wg)(),(0,a.iD)("div",N)):(0,a.kq)("",!0),i.displayForm?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("button",{id:"closeButton",onClick:t[1]||(t[1]=(...e)=>l.handleDisplay&&l.handleDisplay(...e))},"X"),R,(0,a._)("form",{id:"demandCreationForm",onSubmit:t[16]||(t[16]=(...e)=>l.handleSubmit&&l.handleSubmit(...e))},[(0,a._)("div",I,[(0,a._)("div",L,[M,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formSubject","onUpdate:modelValue":t[2]||(t[2]=e=>i.newDemand.sujet=e),placeholder:"Trouvez un titre pour votre demande",required:""},null,512),[[S.nr,i.newDemand.sujet]])]),(0,a._)("div",Z,[O,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formNature","onUpdate:modelValue":t[3]||(t[3]=e=>i.newDemand.nature=e),required:""},B,512),[[S.bM,i.newDemand.nature]])]),(0,a._)("div",P,[G,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formType","onUpdate:modelValue":t[4]||(t[4]=e=>i.newDemand.type=e),required:""},J,512),[[S.bM,i.newDemand.type]])]),(0,a._)("div",X,[K,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formAge","onUpdate:modelValue":t[5]||(t[5]=e=>i.newDemand.age=e),required:""},ne,512),[[S.bM,i.newDemand.age]])]),(0,a._)("div",ae,[oe,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formPurpose","onUpdate:modelValue":t[6]||(t[6]=e=>i.newDemand.usage=e),required:""},le,512),[[S.bM,i.newDemand.usage]])]),(0,a._)("div",se,[re,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formResearchStatus","onUpdate:modelValue":t[7]||(t[7]=e=>i.newDemand.status_recherche=e),required:""},ue,512),[[S.bM,i.newDemand.status_recherche]])]),(0,a._)("div",me,[ce,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formCountry","onUpdate:modelValue":t[8]||(t[8]=e=>i.newDemand.pays=e),placeholder:"Renseignez le pays où se situe le bien",required:""},null,512),[[S.nr,i.newDemand.pays]])]),(0,a._)("div",pe,[fe,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formCity","onUpdate:modelValue":t[9]||(t[9]=e=>i.newDemand.ville=e),placeholder:"Renseignez la ville où se situe le bien",required:""},null,512),[[S.nr,i.newDemand.ville]])]),(0,a._)("div",he,[ve,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formAcquisitionAmount","onUpdate:modelValue":t[10]||(t[10]=e=>i.newDemand.montant_bien=e),placeholder:"Renseignez la valeur estimée du bien",required:""},null,512),[[S.nr,i.newDemand.montant_bien]])]),(0,a._)("div",_e,[be,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formTravauxAmount","onUpdate:modelValue":t[11]||(t[11]=e=>i.newDemand.montant_travaux=e),placeholder:"Renseignez la valeur estimée des travaux",required:""},null,512),[[S.nr,i.newDemand.montant_travaux]])]),(0,a._)("div",De,[ye,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formNotaireAmount","onUpdate:modelValue":t[12]||(t[12]=e=>i.newDemand.frais_notaire=e),placeholder:"Renseignez les frais de notaires, si il y a"},null,512),[[S.nr,i.newDemand.frais_notaire]])]),(0,a._)("div",we,[ge,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formAloneGroup","onUpdate:modelValue":t[13]||(t[13]=e=>i.newDemand.accompagnement=e),required:""},ke,512),[[S.bM,i.newDemand.accompagnement]])]),(0,a._)("div",xe,[Ve,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formApport","onUpdate:modelValue":t[14]||(t[14]=e=>i.newDemand.apport_personnel=e),placeholder:"Renseignez votre apport dans l'acquisition",required:""},null,512),[[S.nr,i.newDemand.apport_personnel]])]),(0,a._)("div",je,[Ee,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formComment","onUpdate:modelValue":t[15]||(t[15]=e=>i.newDemand.commentaire=e),placeholder:"Vous pouvez ajouter tout détail que vous pensez significant"},null,512),[[S.nr,i.newDemand.commentaire]])]),(0,a._)("div",Ue,[qe,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.userFiles,(e=>((0,a.wg)(),(0,a.j4)(s,{key:e.id_document,file:e},null,8,["file"])))),128))]),(0,a.Wm)(r)])]),Se],32)],512)):(0,a.kq)("",!0)])}const Ne=e=>((0,a.dD)("data-v-5f6b53ce"),e=e(),(0,a.Cn)(),e),$e={id:"checkableRow"},Re=["id","name"],Ie=["for"],Le=Ne((()=>(0,a._)("br",null,null,-1)));function Me(e,t,n,i,l,s){return(0,a.wg)(),(0,a.iD)("div",$e,[(0,a._)("input",{type:"checkbox",id:n.file.id_document,ref:n.file.id_document,name:n.file.id,value:"Bike",onChange:t[0]||(t[0]=e=>s.handleAddFile(e))},null,40,Re),(0,a._)("label",{for:n.file.id},(0,o.zw)(n.file.nom_document)+" ["+(0,o.zw)(n.file.type)+"]",9,Ie),Le])}var Ze={name:"ClientFileListCheckableElement",props:{file:{type:Object,required:!0}},methods:{handleAddFile(e){e.target.checked?this.$parent.newDemand.files.push(this.file.id_document):this.$parent.newDemand.files=this.$parent.newDemand.files.filter((e=>e!==this.file.id_document)),console.log(this.$parent.newDemand.files)}},updated(){void 0==this.$parent.newDemand.files&&(this.$parent.newDemand.files=[]),this.$parent.newDemand.files.includes(this.file.id_document)?this.$refs[this.file.id_document].checked=!0:this.$refs[this.file.id_document].checked=!1},mounted(){void 0==this.$parent.newDemand.files&&(this.$parent.newDemand.files=[]),this.$parent.newDemand.files.includes(this.file.id_document)?this.$refs[this.file.id_document].checked=!0:this.$refs[this.file.id_document].checked=!1}},Oe=n(89);const He=(0,Oe.Z)(Ze,[["render",Me],["__scopeId","data-v-5f6b53ce"]]);var Be=He,Pe=n(9620),Ge={name:"ClientDemandForm",data(){return{newDemand:{sujet:"",nature:"",type:"",age:"",usage:"",status_recherche:"",pays:"",ville:"",montant_bien:"",montant_travaux:"",frais_notaire:"",accompagnement:"",apport_personnel:"",commentaire:"",files:[]},displayForm:!1,userFiles:[]}},methods:{handleSubmit(e){if(""==this.newDemand.sujet||""==this.newDemand.nature||""==this.newDemand.type||""==this.newDemand.age||""==this.newDemand.usage||""==this.newDemand.status_recherche||""==this.newDemand.pays||""==this.newDemand.montant_bien||""==this.newDemand.accompagnement||""==this.newDemand.apport_personnel)return void this.$notify({title:"Erreur",text:"Veuillez remplir tous les champs obligatoires",type:"error"});e.preventDefault();let t=["Document d'identité","Fiche de paie","Document médical","Justificatif de domicile"],n=[],a=[];for(let o=0;o<this.userFiles.length;o++)-1!=this.newDemand.files.findIndex((e=>e==this.userFiles[o].id_document))&&n.push(this.userFiles[o].type);for(let o=0;o<t.length;o++)-1==n.findIndex((e=>e==t[o]))&&a.push(t[o]);a.length>0&&!confirm("Attention ! Les fichiers suivants sont manquants : \n-"+a.join("\n-")+"\nVoulez-vous continuer ?")||(console.log(localStorage.getItem("token")),fetch(this.api_url+"demande_client/createDemande",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(this.newDemand)}).then((e=>{if(e.ok)return e.json();throw new Error("Something went wrong")})).then((e=>{console.log(e);let t=this.newDemand;t.id_demande=e.id_demande,this.$parent.fetchUserDemands(),console.log(this.$parent.userDemands),this.newDemand={sujet:"",nature:"",type:"",age:"",usage:"",status_recherche:"",pays:"",ville:"",montant_bien:"",montant_travaux:"",frais_notaire:"",accompagnement:"",apport_personnel:"",commentaire:"",files:[]},this.$notify({title:"Demande envoyée",text:"Votre demande a bien été envoyée",type:"success"}),this.handleDisplay()})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:"Une erreur est survenue, veuillez réessayer plus tard",type:"error"})})))},handleDisplay(){this.displayForm=!this.displayForm,this.displayForm&&fetch(this.api_url+"document/getAllDocuments",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();throw new Error("Il y a eu un problème lors de la récupération des documents")})).then((e=>{console.log(e),this.userFiles=e})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:e.message,type:"error"})}))}},components:{ClientFileListCheckableElement:Be,ClientNewFileForm:Pe.Z},mounted(){}};const We=(0,Oe.Z)(Ge,[["render",Te],["__scopeId","data-v-bafaa202"]]);var Je=We,Xe=n(1042);const Ke=e=>((0,a.dD)("data-v-40d8370d"),e=e(),(0,a.Cn)(),e),Ye={id:"notificationListElement"},Qe={class:"notification-row"},et=Ke((()=>(0,a._)("div",{class:"notification-row"},[(0,a._)("span",{id:"comment"}," Accepté ! ")],-1)));function tt(e,t,n,i,l,s){return(0,a.wg)(),(0,a.iD)("div",Ye,[(0,a._)("div",Qe,[(0,a._)("span",null,(0,o.zw)(n.notification.sujet_demande),1),(0,a._)("span",null,(0,o.zw)(n.notification.banque_name),1)]),et])}var nt={name:"ClientNotificationListElement",props:{notification:{type:Object,required:!0}}};const at=(0,Oe.Z)(nt,[["render",tt],["__scopeId","data-v-40d8370d"]]);var ot=at;const it=e=>((0,a.dD)("data-v-3c67e8d4"),e=e(),(0,a.Cn)(),e),lt={id:"demandListElement"},st={class:"demandRow"},rt={class:"demandRow"},dt=it((()=>(0,a._)("br",null,null,-1))),ut={class:"demandRow"},mt=it((()=>(0,a._)("span",null,"État :",-1))),ct={id:"accept_count"},pt={id:"pending_count"},ft={id:"refuse_count"};function ht(e,t,n,i,l,s){const r=(0,a.up)("client-demand-detail");return(0,a.wg)(),(0,a.iD)("div",lt,[(0,a._)("h3",null,(0,o.zw)(n.demand.sujet),1),(0,a._)("div",st,[(0,a._)("span",null," Acquisition : "+(0,o.zw)(n.demand.montant_bien)+" €",1),(0,a.Uk)(),(0,a._)("span",null," Apport : "+(0,o.zw)(n.demand.apport_personnel)+" €",1)]),(0,a._)("div",rt,[(0,a._)("span",null,(0,o.zw)(n.demand.commentaire),1)]),dt,(0,a._)("div",ut,[mt,(0,a._)("span",ct,(0,o.zw)(n.demand.accepted),1),(0,a._)("span",pt,(0,o.zw)(n.demand.pending),1),(0,a._)("span",ft,(0,o.zw)(n.demand.refused),1)]),(0,a.Wm)(r,{propDemand:n.demand},null,8,["propDemand"])])}const vt=e=>((0,a.dD)("data-v-11f5ef2a"),e=e(),(0,a.Cn)(),e),_t={key:0,id:"cover"},bt={key:1,id:"modal-detail-form",ref:"modalForm"},Dt={id:"demandDetailFormFields"},yt={class:"mb-3"},wt=vt((()=>(0,a._)("label",{for:"formSubject",class:"form-label"},"Sujet",-1))),gt={class:"mb-3"},Ct=vt((()=>(0,a._)("label",{for:"formNature",class:"form-label"},"Nature du projet ?",-1))),At=(0,a.uE)('<option value="" data-v-11f5ef2a>Choisissez la nature de votre projet</option><option value="Achat" data-v-11f5ef2a>Achat</option><option value="Construction" data-v-11f5ef2a>Construction</option><option value="Travaux" data-v-11f5ef2a>Travaux</option><option value="Autre" data-v-11f5ef2a>Autre</option>',5),Ft=[At],zt={class:"mb-3"},kt=vt((()=>(0,a._)("label",{for:"formType",class:"form-label"},"Type de bien ?",-1))),xt=(0,a.uE)('<option value="" data-v-11f5ef2a>Choisissez le type du bien</option><option value="Maison" data-v-11f5ef2a>Maison</option><option value="Appartement" data-v-11f5ef2a>Appartement</option><option value="Terrain" data-v-11f5ef2a>Terrain</option><option value="Autre" data-v-11f5ef2a>Autre</option>',5),Vt=[xt],jt={class:"mb-3"},Et=vt((()=>(0,a._)("label",{for:"formAge",class:"form-label"},"Age du bien ?",-1))),Ut=vt((()=>(0,a._)("option",{value:""},"Choisissez l'âge du bien",-1))),qt=vt((()=>(0,a._)("option",{value:"Ancien"},"Ancien",-1))),St=vt((()=>(0,a._)("option",{value:"Neuf"},"Neuf",-1))),Tt=vt((()=>(0,a._)("option",{value:"Vente sur plan"},"Vente sur plan",-1))),Nt=[Ut,qt,St,Tt],$t={class:"mb-3"},Rt=vt((()=>(0,a._)("label",{for:"formPurpose",class:"form-label"},"Usage du bien ?",-1))),It=(0,a.uE)('<option value="" data-v-11f5ef2a>Choisissez l&#39;usage du bien</option><option value="Résidence principale" data-v-11f5ef2a>Résidence principale</option><option value="Résidence secondaire" data-v-11f5ef2a>Résidence secondaire</option><option value="Investissement locatif" data-v-11f5ef2a>Investissement locatif</option><option value="Usage professionnel" data-v-11f5ef2a>Usage professionnel</option><option value="Usage mixte" data-v-11f5ef2a>Usage mixte</option><option value="Autre" data-v-11f5ef2a>Autre</option>',7),Lt=[It],Mt={class:"mb-3"},Zt=vt((()=>(0,a._)("label",{for:"formResearchStatus",class:"form-label"},"Ou en êtes vous dans votre recherche ?",-1))),Ot=(0,a.uE)('<option value="" data-v-11f5ef2a>Renseigner où vous en êtes dans votre recherche</option><option value="En recherche" data-v-11f5ef2a>En recherche</option><option value="Vous vous préparez à faire une offre" data-v-11f5ef2a>Vous vous préparez à faire une offre</option><option value="Vous avez déjà fait une offre" data-v-11f5ef2a>Vous avez déjà fait une offre</option><option value="Vous pensez bientôt signer compromi" data-v-11f5ef2a>Vous pensez bientôt signer compromis</option><option value="Vous avez déjà signé un compromis" data-v-11f5ef2a>Vous avez déjà signé un compromis</option><option value="Autre" data-v-11f5ef2a>Autre</option>',7),Ht=[Ot],Bt={class:"mb-3"},Pt=vt((()=>(0,a._)("label",{for:"formCountry",class:"form-label"},"Dans quel pays se situe le bien ?",-1))),Gt={class:"mb-3"},Wt=vt((()=>(0,a._)("label",{for:"formCity",class:"form-label"},"Dans quelle ville se situe le bien ?",-1))),Jt={class:"mb-3"},Xt=vt((()=>(0,a._)("label",{for:"formAcquisitionAmount",class:"form-label"},"Montant estimé de l'acquisition ?",-1))),Kt={class:"mb-3"},Yt=vt((()=>(0,a._)("label",{for:"formTravauxAmount",class:"form-label"},"Montant estimé des travaux ?",-1))),Qt={class:"mb-3"},en=vt((()=>(0,a._)("label",{for:"formNotaireAmount",class:"form-label"},"Frais de notaire ? (optionnel)",-1))),tn={class:"mb-3"},nn=vt((()=>(0,a._)("label",{for:"formAloneGroup",class:"form-label"},"Comment empruntez-vous ?",-1))),an=vt((()=>(0,a._)("option",{value:""},"Vous empruntez seul ? En groupe ? ",-1))),on=vt((()=>(0,a._)("option",{value:"1"},"Seul",-1))),ln=vt((()=>(0,a._)("option",{value:"2"},"Avec un co-emprunteur",-1))),sn=vt((()=>(0,a._)("option",{value:"3"},"Autre",-1))),rn=[an,on,ln,sn],dn={class:"mb-3"},un=vt((()=>(0,a._)("label",{for:"formApport",class:"form-label"},"Votre apport personnel ?",-1))),mn={class:"mb-3"},cn=vt((()=>(0,a._)("label",{for:"formComment",class:"form-label"},"Commentaires sur le projet ? (optionnel)",-1))),pn={class:"mb-3"},fn=vt((()=>(0,a._)("label",{for:"formFileMultiple",class:"form-label"},"Vos Fichiers",-1))),hn=vt((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary"},"Enregistrer les modifications",-1)));function vn(e,t,n,i,l,s){const r=(0,a.up)("ClientFileListCheckableElement"),d=(0,a.up)("client-new-file-form");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{id:"detailButton",onClick:t[0]||(t[0]=(...e)=>s.handleDisplay&&s.handleDisplay(...e))},"Détails"),l.displayDetail?((0,a.wg)(),(0,a.iD)("div",_t)):(0,a.kq)("",!0),l.displayDetail?((0,a.wg)(),(0,a.iD)("div",bt,[(0,a._)("button",{id:"closeButton",onClick:t[1]||(t[1]=(...e)=>s.handleDisplay&&s.handleDisplay(...e))},"X"),(0,a._)("h2",null,"Détails de la demande "+(0,o.zw)(l.newDemand.subject),1),(0,a._)("form",{id:"demandDetailForm",onSubmit:t[17]||(t[17]=(...e)=>s.handleSubmit&&s.handleSubmit(...e))},[(0,a._)("div",Dt,[(0,a._)("div",yt,[wt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formSubject","onUpdate:modelValue":t[2]||(t[2]=e=>l.newDemand.sujet=e),placeholder:"Trouvez un titre pour votre demande",required:""},null,512),[[S.nr,l.newDemand.sujet]])]),(0,a._)("div",gt,[Ct,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formNature","onUpdate:modelValue":t[3]||(t[3]=e=>l.newDemand.nature=e),required:""},Ft,512),[[S.bM,l.newDemand.nature]])]),(0,a._)("div",zt,[kt,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formType","onUpdate:modelValue":t[4]||(t[4]=e=>l.newDemand.type=e),required:""},Vt,512),[[S.bM,l.newDemand.type]])]),(0,a._)("div",jt,[Et,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formAge","onUpdate:modelValue":t[5]||(t[5]=e=>l.newDemand.age=e),required:""},Nt,512),[[S.bM,l.newDemand.age]])]),(0,a._)("div",$t,[Rt,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formPurpose","onUpdate:modelValue":t[6]||(t[6]=e=>l.newDemand.usage=e),required:""},Lt,512),[[S.bM,l.newDemand.usage]])]),(0,a._)("div",Mt,[Zt,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formResearchStatus","onUpdate:modelValue":t[7]||(t[7]=e=>l.newDemand.status_recherche=e),required:""},Ht,512),[[S.bM,l.newDemand.status_recherche]])]),(0,a._)("div",Bt,[Pt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formCountry","onUpdate:modelValue":t[8]||(t[8]=e=>l.newDemand.pays=e),placeholder:"Renseignez le pays où se situe le bien",required:""},null,512),[[S.nr,l.newDemand.pays]])]),(0,a._)("div",Gt,[Wt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formCity","onUpdate:modelValue":t[9]||(t[9]=e=>l.newDemand.ville=e),placeholder:"Renseignez la ville où se situe le bien",required:""},null,512),[[S.nr,l.newDemand.ville]])]),(0,a._)("div",Jt,[Xt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formAcquisitionAmount","onUpdate:modelValue":t[10]||(t[10]=e=>l.newDemand.montant_bien=e),placeholder:"Renseignez la valeur estimée du bien",required:""},null,512),[[S.nr,l.newDemand.montant_bien]])]),(0,a._)("div",Kt,[Yt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formTravauxAmount","onUpdate:modelValue":t[11]||(t[11]=e=>l.newDemand.montant_travaux=e),placeholder:"Renseignez la valeur estimée des travaux",required:""},null,512),[[S.nr,l.newDemand.montant_travaux]])]),(0,a._)("div",Qt,[en,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formNotaireAmount","onUpdate:modelValue":t[12]||(t[12]=e=>l.newDemand.frais_notaire=e),placeholder:"Renseignez les frais de notaires, si il y a"},null,512),[[S.nr,l.newDemand.frais_notaire]])]),(0,a._)("div",tn,[nn,(0,a.wy)((0,a._)("select",{class:"form-select","aria-label":"Default select example",id:"formAloneGroup","onUpdate:modelValue":t[13]||(t[13]=e=>l.newDemand.accompagnement=e),required:""},rn,512),[[S.bM,l.newDemand.accompagnement]])]),(0,a._)("div",dn,[un,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formApport","onUpdate:modelValue":t[14]||(t[14]=e=>l.newDemand.apport_personnel=e),placeholder:"Renseignez votre apport dans l'acquisition",required:""},null,512),[[S.nr,l.newDemand.apport_personnel]])]),(0,a._)("div",mn,[cn,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"formComment","onUpdate:modelValue":t[15]||(t[15]=e=>l.newDemand.commentaire=e),placeholder:"Vous pouvez ajouter tout détail que vous pensez significant"},null,512),[[S.nr,l.newDemand.commentaire]])]),(0,a._)("div",pn,[fn,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.userFiles,(e=>((0,a.wg)(),(0,a.j4)(r,{key:e.id_document,file:e},null,8,["file"])))),128))]),(0,a.Wm)(d)])]),hn,(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:t[16]||(t[16]=(...e)=>s.handleDelete&&s.handleDelete(...e))},"Supprimer")],32)],512)):(0,a.kq)("",!0)])}var _n={name:"ClientDemandDetail",components:{ClientFileListCheckableElement:Be,ClientNewFileForm:Pe.Z},props:{propDemand:{type:Object,required:!0}},data(){return{newDemand:{},displayDetail:!1,userFiles:[]}},methods:{handleSubmit(e){if(""==this.newDemand.subject||""==this.newDemand.nature||""==this.newDemand.type||""==this.newDemand.age||""==this.newDemand.usage||""==this.newDemand.researchStatus||""==this.newDemand.country||""==this.newDemand.city||""==this.newDemand.acquisitionAmount||""==this.newDemand.aloneGroup||""==this.newDemand.apport)return;e.preventDefault();let t=["Document d'identité","Fiche de paie","Document médical","Justificatif de domicile"],n=[],a=[];for(let o=0;o<this.userFiles.length;o++)-1!=this.newDemand.files.findIndex((e=>e==this.userFiles[o].id_document))&&n.push(this.userFiles[o].type);for(let o=0;o<t.length;o++)-1==n.findIndex((e=>e==t[o]))&&a.push(t[o]);a.length>0&&!confirm("Attention ! Les fichiers suivants sont manquants : \n-"+a.join("\n-")+"\nVoulez-vous continuer ?")||fetch(this.api_url+"demande_client/updateDemande/"+this.newDemand.id_demande,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(this.newDemand)}).then((e=>{if(e.ok)return e.json();throw new Error("Erreur lors de la mise à jour de la demande")})).then((e=>{console.log(e),this.displayDetail=!1,this.$notify({title:"Demande mise à jour",text:"La demande a bien été mise à jour",type:"success"})})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:e.message,type:"error"})}))},handleDelete(){fetch(this.api_url+"demande_client/deleteDemande/"+this.newDemand.id_demande,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();throw new Error("Erreur lors de la suppression de la demande")})).then((e=>{console.log(e),console.log("a"),this.displayDetail=!1,this.$notify({title:"Demande supprimée",text:"La demande a bien été supprimée",type:"success"}),console.log(this.$parent.$parent.userDemands),this.$parent.$parent.userDemands=this.$parent.$parent.userDemands.filter((e=>e.id_demande!=this.newDemand.id_demande)),console.log(this.$parent.$parent.userDemands)})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:e.message,type:"error"})}))},handleDisplay(){this.displayDetail=!this.displayDetail,this.displayDetail&&fetch(this.api_url+"document/getAllDocuments",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();if(401!=e.status)throw new Error("Une erreur est survenue, veuillez réessayer plus tard");this.$router.push("/login/client")})).then((e=>{console.log(e),this.userFiles=e})).catch((e=>{console.log(e),this.$notify({title:"Erreur",text:e.message,type:"error"})}))}},mounted(){this.newDemand=this.propDemand}};const bn=(0,Oe.Z)(_n,[["render",vn],["__scopeId","data-v-11f5ef2a"]]);var Dn=bn,yn={components:{ClientDemandDetail:Dn},name:"ClientDemandsListElement",props:{demand:{type:Object,required:!0}}};const wn=(0,Oe.Z)(yn,[["render",ht],["__scopeId","data-v-3c67e8d4"]]);var gn=wn;const Cn={key:0,id:"cover"},An={key:1,id:"modalFileList"};function Fn(e,t,n,o,i,l){const s=(0,a.up)("client-file-list");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=()=>l.handleDisplay())},"Vos fichiers"),i.display?((0,a.wg)(),(0,a.iD)("div",Cn)):(0,a.kq)("",!0),i.display?((0,a.wg)(),(0,a.iD)("div",An,[(0,a._)("button",{id:"closeButton",onClick:t[1]||(t[1]=()=>l.handleDisplay())},"X"),(0,a.Wm)(s)])):(0,a.kq)("",!0)])}var zn=n(5366),kn={name:"ClientFileListModal",components:{ClientFileList:zn.Z},data(){return{display:!1}},methods:{handleDisplay(){this.display=!this.display}}};const xn=(0,Oe.Z)(kn,[["render",Fn],["__scopeId","data-v-c927ea74"]]);var Vn=xn,jn={name:"ClientHomeView",components:{HeaderComponent:Xe.Z,ClientDemandForm:Je,ClientNotificationListElement:ot,ClientDemandsListElement:gn,ClientFileListModal:Vn},data(){return{userData:{},userNotifications:[],userDemands:[]}},methods:{fetchUserData(){fetch(this.api_url+"client/getClient",{headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}}).then((e=>(401==e.status&&this.$router.push("/login/client"),e.json()))).then((e=>{console.log(e),this.userData=e;for(const t in this.userData)"date_birth"==t?this.userData[t]=new Date(this.userData[t]).toLocaleDateString():null==this.userData[t]&&(this.userData[t]="Non renseigné")}))},fetchUserNotifications(){fetch(this.api_url+"demande_client/getAllDemandesAccepted",{headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>(401==e.status&&this.$router.push("/login/client"),e.json()))).then((e=>{Array.isArray(e)?(console.log(e),this.userNotifications=e):this.userNotifications=[]}))},fetchUserDemands(){fetch(this.api_url+"demande_client/getAllDemandes",{headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>(401==e.status&&this.$router.push("/login/client"),e.json()))).then((e=>{console.log(e),this.userDemands=e,fetch(this.api_url+"demande_client/getAllStatutDemandes",{headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>e.json())).then((e=>{for(let t=0;t<this.userDemands.length;t++)this.userDemands[t].accepted=e[t].accepted,this.userDemands[t].refused=e[t].refused,this.userDemands[t].pending=e[t].pending}))}))}},mounted(){console.log("Mounted"),this.fetchUserData(),this.fetchUserNotifications(),this.fetchUserDemands()}};const En=(0,Oe.Z)(jn,[["render",q],["__scopeId","data-v-5303119c"]]);var Un=En}}]);
//# sourceMappingURL=466.711f04c1.js.map