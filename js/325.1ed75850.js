(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[325],{7045:function(n,e,l){var a=l(6339),t=l(3070);n.exports=function(n,e,l){return l.get&&a(l.get,e,{getter:!0}),l.set&&a(l.set,e,{setter:!0}),t.f(n,e,l)}},2062:function(n,e,l){"use strict";var a=l(9781),t=l(1702),s=l(7045),d=URLSearchParams.prototype,i=t(d.forEach);a&&!("size"in d)&&s(d,"size",{get:function(){var n=0;return i(this,(function(){n++})),n},configurable:!0,enumerable:!0})},2325:function(n,e,l){"use strict";l.r(e),l.d(e,{default:function(){return Sn}});var a=l(3396),t=l(9242);const s={id:"main-body"},d=(0,a._)("h3",null,"Liste des demandes en cours :",-1),i={id:"demands-overview-area",class:"section-list"},o={id:"demands-area-header"},u={id:"research-input",class:"input-group flex-nowrap"},r=(0,a._)("option",{value:""},"Trier par :",-1),p=(0,a._)("option",{value:"Name"},"Nom",-1),m=(0,a._)("option",{value:"Value"},"Valeur",-1),c=(0,a._)("option",{value:"Salaire"},"Salaire",-1),_=[r,p,m,c],h=(0,a._)("option",{value:"0"},"Afficher Tous",-1),w=(0,a._)("option",{value:"1"},"Favoris Uniquement",-1),f=[h,w],D={id:"demands-overview-area"},v=(0,a._)("h2",null,"Liste des demandes :",-1),y={id:"demands-list",class:"section-list"};function b(n,e,l,r,p,m){const c=(0,a.up)("HeaderComponent"),h=(0,a.up)("client-bank-demands-list-element");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c),(0,a._)("div",s,[d,(0,a._)("div",i,[(0,a._)("div",o,[(0,a._)("div",u,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":e[0]||(e[0]=n=>p.searchInput=n)},null,512),[[t.nr,p.searchInput]])]),(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{id:"sort-choices",class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[1]||(e[1]=n=>p.orderBy=n)},_,512),[[t.bM,p.orderBy]])]),(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{id:"sort-choices",class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[2]||(e[2]=n=>p.onlyPinned=n)},f,512),[[t.bM,p.onlyPinned]])])]),(0,a._)("div",D,[v,(0,a._)("ul",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.displayedDemands,(n=>((0,a.wg)(),(0,a.j4)(h,{key:n.id_demande,demand:n},null,8,["demand"])))),128))])])])])])}l(7658);var z=l(7139);const g={id:"demandListElement"},k={id:"buttons_options"},C=(0,a._)("span",null,[(0,a._)("p",{id:"delete",class:"but",onclick:"deleteElement()"},"x")],-1),B={class:"demandRow"},E={class:"demandRow"},A={class:"demandRow"};function S(n,e,l,t,s,d){const i=(0,a.up)("bank-demand-detail");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",k,[C,(0,a._)("span",null,[(0,a._)("p",{id:"favorite",class:"but",onClick:e[0]||(e[0]=()=>d.favoriteElement())},"☆")]),(0,a._)("span",null,[(0,a._)("p",{id:"valid",class:"but",onClick:e[1]||(e[1]=()=>d.validElement())},"+")])]),(0,a._)("h2",null,(0,z.zw)(l.demand.sujet),1),(0,a._)("div",B,[(0,a._)("span",null," Nom : "+(0,z.zw)(l.demand.client.nom)+" "+(0,z.zw)(l.demand.client.prenom),1),(0,a.Uk)(),(0,a._)("span",null," Salaire : "+(0,z.zw)(l.demand.client.revenu_mensuel)+" €",1)]),(0,a._)("div",E,[(0,a._)("span",null," Valeur : "+(0,z.zw)(l.demand.montant_bien)+" €",1)]),(0,a._)("div",A,[(0,a._)("span",null,(0,z.zw)(l.demand.commentaire),1)]),(0,a.Wm)(i,{demand:l.demand},null,8,["demand"])])}const j={key:0,id:"modal-form",ref:"modalForm"},R={id:"bankDemandDetailFields"},U={id:"clientInfo",class:"bankDemandDetailDivision"},P=(0,a._)("span",null,"Nom : ",-1),$=(0,a._)("span",null,"Prénom : ",-1),F=(0,a._)("span",null,"Email : ",-1),L=(0,a._)("span",null,"Téléphone : ",-1),V=(0,a._)("span",null,"Pays : ",-1),x=(0,a._)("span",null,"Ville : ",-1),I=(0,a._)("span",null,"Adresse : ",-1),T=(0,a._)("span",null,"Status immobilier : ",-1),N=(0,a._)("span",null,"Situation professionnelle : ",-1),q=(0,a._)("span",null,"Contrat : ",-1),H=(0,a._)("span",null,"Poste depuis : ",-1),M=(0,a._)("span",null,"Banque principale : ",-1),Z=(0,a._)("span",null,"Situation familiale : ",-1),O=(0,a._)("span",null,"Nationalité : ",-1),W=(0,a._)("span",null,"Revenu mensuel : ",-1),K=(0,a._)("span",null,"Prime annuelle : ",-1),Y=(0,a._)("span",null,"Loyer actuel : ",-1),G=(0,a._)("span",null,"Nombre d'enfants : ",-1),X={id:"demandInfo",class:"bankDemandDetailDivision"},J=(0,a._)("span",null,"Sujet : ",-1),Q=(0,a._)("span",null,"Nature : ",-1),nn=(0,a._)("span",null,"Type : ",-1),en=(0,a._)("span",null,"Age : ",-1),ln=(0,a._)("span",null,"Usage : ",-1),an=(0,a._)("span",null,"Status recherche : ",-1),tn=(0,a._)("span",null,"Pays : ",-1),sn=(0,a._)("span",null,"Ville : ",-1),dn=(0,a._)("span",null,"Montant bien : ",-1),on=(0,a._)("span",null,"Montant travaux : ",-1),un=(0,a._)("span",null,"Frais notaire : ",-1),rn=(0,a._)("span",null,"Apport personnel : ",-1),pn=(0,a._)("span",null,"Commentaire : ",-1),mn=(0,a._)("span",null,"Accompagnement : ",-1),cn={id:"demandFiles",class:"bankDemandDetailDivision"},_n=(0,a._)("p",null,"Documents : ",-1),hn={class:"fileRowText"},wn={id:"fileRowTextName"},fn={id:"bankDemandDetailBottomButtons"};function Dn(n,e,l,t,s,d){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{id:"detailButton",onClick:e[0]||(e[0]=()=>d.handleDisplay())},"Détails"),s.displayDetail?((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("button",{id:"closeButton",onClick:e[1]||(e[1]=()=>d.handleDisplay())},"X"),(0,a._)("h2",null,(0,z.zw)(l.demand.sujet),1),(0,a._)("div",R,[(0,a._)("div",U,[(0,a._)("p",null,[P,(0,a._)("span",null,(0,z.zw)(l.demand.client.nom),1)]),(0,a._)("p",null,[$,(0,a._)("span",null,(0,z.zw)(l.demand.client.prenom),1)]),(0,a._)("p",null,[F,(0,a._)("span",null,(0,z.zw)(l.demand.client.email),1)]),(0,a._)("p",null,[L,(0,a._)("span",null,(0,z.zw)(l.demand.client.tel),1)]),(0,a._)("p",null,[V,(0,a._)("span",null,(0,z.zw)(l.demand.client.pays),1)]),(0,a._)("p",null,[x,(0,a._)("span",null,(0,z.zw)(l.demand.client.ville),1)]),(0,a._)("p",null,[I,(0,a._)("span",null,(0,z.zw)(l.demand.client.adresse),1)]),(0,a._)("p",null,[T,(0,a._)("span",null,(0,z.zw)(l.demand.client.status_immo),1)]),(0,a._)("p",null,[N,(0,a._)("span",null,(0,z.zw)(l.demand.client.situation_professionnelle),1)]),(0,a._)("p",null,[q,(0,a._)("span",null,(0,z.zw)(l.demand.client.contrat),1)]),(0,a._)("p",null,[H,(0,a._)("span",null,(0,z.zw)(l.demand.client.poste_depuis),1)]),(0,a._)("p",null,[M,(0,a._)("span",null,(0,z.zw)(l.demand.client.banque_principale),1)]),(0,a._)("p",null,[Z,(0,a._)("span",null,(0,z.zw)(l.demand.client.situation_familiale),1)]),(0,a._)("p",null,[O,(0,a._)("span",null,(0,z.zw)(l.demand.client.nationalite),1)]),(0,a._)("p",null,[W,(0,a._)("span",null,(0,z.zw)(l.demand.client.revenu_mensuel),1)]),(0,a._)("p",null,[K,(0,a._)("span",null,(0,z.zw)(l.demand.client.prime_annuelle),1)]),(0,a._)("p",null,[Y,(0,a._)("span",null,(0,z.zw)(l.demand.client.loyer_actuel),1)]),(0,a._)("p",null,[G,(0,a._)("span",null,(0,z.zw)(l.demand.client.nombre_enfant),1)])]),(0,a._)("div",X,[(0,a._)("p",null,[J,(0,a._)("span",null,(0,z.zw)(l.demand.sujet),1)]),(0,a._)("p",null,[Q,(0,a._)("span",null,(0,z.zw)(l.demand.nature),1)]),(0,a._)("p",null,[nn,(0,a._)("span",null,(0,z.zw)(l.demand.type),1)]),(0,a._)("p",null,[en,(0,a._)("span",null,(0,z.zw)(l.demand.age),1)]),(0,a._)("p",null,[ln,(0,a._)("span",null,(0,z.zw)(l.demand.usage),1)]),(0,a._)("p",null,[an,(0,a._)("span",null,(0,z.zw)(l.demand.status_recherche),1)]),(0,a._)("p",null,[tn,(0,a._)("span",null,(0,z.zw)(l.demand.pays),1)]),(0,a._)("p",null,[sn,(0,a._)("span",null,(0,z.zw)(l.demand.ville),1)]),(0,a._)("p",null,[dn,(0,a._)("span",null,(0,z.zw)(l.demand.montant_bien),1)]),(0,a._)("p",null,[on,(0,a._)("span",null,(0,z.zw)(l.demand.montant_travaux),1)]),(0,a._)("p",null,[un,(0,a._)("span",null,(0,z.zw)(l.demand.frais_notaire),1)]),(0,a._)("p",null,[rn,(0,a._)("span",null,(0,z.zw)(l.demand.apport_personnel),1)]),(0,a._)("p",null,[pn,(0,a._)("span",null,(0,z.zw)(l.demand.commentaire),1)]),(0,a._)("p",null,[mn,(0,a._)("span",null,(0,z.zw)(1==l.demand.accompagnement?"Seul":"En groupe"),1)])]),(0,a._)("div",cn,[_n,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.demand.files,(n=>((0,a.wg)(),(0,a.iD)("li",{class:"fileRow list-group-item",key:n.name},[(0,a._)("div",hn,[(0,a._)("span",wn,(0,z.zw)(n.nom_document),1),(0,a._)("span",null,(0,z.zw)(n.type),1)])])))),128)),(0,a._)("button",{class:"btn btn-secondary",onClick:e[2]||(e[2]=()=>d.handleDownload(l.demand.id_demande,l.demand.client.nom+" "+l.demand.client.prenom+" : Fichiers "+l.demand.sujet))},"Télécharger tous les documents")])]),(0,a._)("div",fn,[(0,a._)("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=()=>d.handleDisplay())},"Épingler"),(0,a._)("button",{class:"btn btn-success",onClick:e[4]||(e[4]=()=>d.handleDisplay())},"Accepter"),(0,a._)("button",{class:"btn btn-danger",onClick:e[5]||(e[5]=()=>d.handleDisplay())},"Refuser")])],512)):(0,a.kq)("",!0)])}l(2062);var vn={data(){return{displayDetail:!1}},props:{demand:{type:Object,required:!0}},methods:{handleDisplay(){this.displayDetail=!this.displayDetail},handleDownload(n,e){console.log(n),fetch(this.api_url+"document/downloadAllDocumentsBanque/"+n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((n=>{if(n.ok)return n.blob();throw new Error("Something went wrong")})).then((n=>{console.log(n);const l=window.URL.createObjectURL(new Blob([n])),a=document.createElement("a");a.href=l,a.setAttribute("download",e+".zip"),document.body.appendChild(a),a.click()})).catch((n=>{console.log(n)}))},handleFavorite(){this.$parent.favoriteElement()},handleValid(){this.$parent.validElement()},handleDelete(){this.$parent.deleteElement()}}},yn=l(89);const bn=(0,yn.Z)(vn,[["render",Dn]]);var zn=bn,gn={components:{BankDemandDetail:zn},name:"ClientDemandsListElement",props:{demand:{type:Object,required:!0}},methods:{handleDisplayDetail(){alert("WIP")},deleteElement(){},validElement(){0==this.$parent.userDemands.find((n=>n.id==this.demand.id)).added?this.$parent.userDemands.find((n=>n.id==this.demand.id)).added=!0:this.$parent.userDemands.find((n=>n.id==this.demand.id)).added=!1,console.log(this.$parent.userDemands)},favoriteElement(){0==this.$parent.userDemands.find((n=>n.id==this.demand.id)).favorite?this.$parent.userDemands.find((n=>n.id==this.demand.id)).favorite=!0:this.$parent.userDemands.find((n=>n.id==this.demand.id)).favorite=!1,console.log(this.$parent.userDemands)}}};const kn=(0,yn.Z)(gn,[["render",S]]);var Cn=kn,Bn=l(9222),En={name:"BankHomeView",components:{HeaderComponent:Bn.Z,ClientBankDemandsListElement:Cn},data(){return{userDemands:[],displayedDemands:[],searchInput:"",orderBy:"",onlyPinned:0}},watch:{searchInput(n){console.log(n),this.performAllFilters()},orderBy(n){console.log(n),this.performAllFilters()},onlyPinned(n){console.log(n),this.performAllFilters()}},methods:{performAllFilters(){this.displayedDemands=this.userDemands.filter((n=>n.sujet.toLowerCase().includes(this.searchInput.toLowerCase()))),"Name"==this.orderBy?this.displayedDemands.sort(((n,e)=>n.client.nom.localeCompare(e.client.nom))):"Value"==this.orderBy?this.displayedDemands.sort(((n,e)=>n.montant_bien-e.montant_bien)):"Salaire"==this.orderBy?this.displayedDemands.sort(((n,e)=>n.client.revenu_mensuel-e.client.revenu_mensuel)):this.displayedDemands.sort(((n,e)=>n.id_demande-e.id_demande)),1==this.onlyPinned&&(this.displayedDemands=this.displayedDemands.filter((n=>n.favorite)))},fetchBankUserDemands(){fetch(this.api_url+"demande_banque/getAllDemandes",{headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((n=>(401==n.status&&this.$router.push("/login/bank"),n.json()))).then((n=>{console.log(n),this.userDemands=n,this.displayedDemands=this.userDemands}))}},mounted(){console.log("Mounted"),this.fetchBankUserDemands()},beforeUnmount(){console.log("Unmounted")}};const An=(0,yn.Z)(En,[["render",b]]);var Sn=An}}]);
//# sourceMappingURL=325.1ed75850.js.map