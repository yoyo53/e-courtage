"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[409],{3409:function(e,n,t){t.d(n,{Z:function(){return re}});var o=t(3396),l=t(7139),a=t(9242);const i={key:0,id:"modal-form",ref:"modalForm"},s={id:"form"},r={class:"mb-3"},u=(0,o._)("label",{for:"formSubject",class:"form-label"},"Sujet",-1),d={class:"mb-3"},m=(0,o._)("label",{for:"formNature",class:"form-label"},"Nature du projet ?",-1),p=(0,o.uE)('<option value="">Choisissez la nature de votre projet</option><option value="Achat">Achat</option><option value="Construction">Construction</option><option value="Travaux">Travaux</option><option value="Autre">Autre</option>',5),c=[p],f={class:"mb-3"},h=(0,o._)("label",{for:"formType",class:"form-label"},"Type de bien ?",-1),b=(0,o.uE)('<option value="">Choisissez le type du bien</option><option value="Maison">Maison</option><option value="Appartement">Appartement</option><option value="Terrain">Terrain</option><option value="Autre">Autre</option>',5),_=[b],v={class:"mb-3"},D=(0,o._)("label",{for:"formAge",class:"form-label"},"Age du bien ?",-1),w=(0,o._)("option",{value:""},"Choisissez l'âge du bien",-1),y=(0,o._)("option",{value:"Ancien"},"Ancien",-1),g=(0,o._)("option",{value:"Neuf"},"Neuf",-1),A=(0,o._)("option",{value:"Vente sur plan"},"Vente sur plan",-1),C=[w,y,g,A],k={class:"mb-3"},V=(0,o._)("label",{for:"formPurpose",class:"form-label"},"Usage du bien ?",-1),z=(0,o.uE)('<option value="">Choisissez l&#39;usage du bien</option><option value="Résidence principale">Résidence principale</option><option value="Résidence secondaire">Résidence secondaire</option><option value="Investissement locatif">Investissement locatif</option><option value="Usage professionnel">Usage professionnel</option><option value="Usage mixte">Usage mixte</option><option value="Autre">Autre</option>',7),F=[z],q={class:"mb-3"},x=(0,o._)("label",{for:"formResearchStatus",class:"form-label"},"Ou en êtes vous dans votre recherche ?",-1),j=(0,o.uE)('<option value="">Renseigner où vous en êtes dans votre recherche</option><option value="En recherche">En recherche</option><option value="Vous vous préparez à faire une offre">Vous vous préparez à faire une offre</option><option value="Vous avez déjà fait une offre">Vous avez déjà fait une offre</option><option value="Vous pensez bientôt signer compromi">Vous pensez bientôt signer compromis</option><option value="Vous avez déjà signé un compromis">Vous avez déjà signé un compromis</option><option value="Autre">Autre</option>',7),E=[j],U={class:"mb-3"},S=(0,o._)("label",{for:"formCountry",class:"form-label"},"Dans quel pays se situe le bien ?",-1),T={class:"mb-3"},$=(0,o._)("label",{for:"formCity",class:"form-label"},"Dans quelle ville se situe le bien ?",-1),N={class:"mb-3"},R=(0,o._)("label",{for:"formAcquisitionAmount",class:"form-label"},"Montant estimé de l'acquisition ?",-1),M={class:"mb-3"},O=(0,o._)("label",{for:"formTravauxAmount",class:"form-label"},"Montant estimé des travaux ?",-1),Z={class:"mb-3"},I=(0,o._)("label",{for:"formNotaireAmount",class:"form-label"},"Frais de notaire ? (optionnel)",-1),B={class:"mb-3"},L=(0,o._)("label",{for:"formAloneGroup",class:"form-label"},"Comment empruntez-vous ?",-1),G=(0,o._)("option",{value:""},"Vous empruntez seul ? En groupe ? ",-1),H=(0,o._)("option",{value:"1"},"Seul",-1),P=(0,o._)("option",{value:"2"},"Avec un co-emprunteur",-1),X=(0,o._)("option",{value:"3"},"Autre",-1),J=[G,H,P,X],K={class:"mb-3"},W=(0,o._)("label",{for:"formApport",class:"form-label"},"Votre apport personnel ?",-1),Y={class:"mb-3"},Q=(0,o._)("label",{for:"formComment",class:"form-label"},"Commentaires sur le projet ? (optionnel)",-1),ee={class:"mb-3"},ne=(0,o._)("label",{for:"formFileMultiple",class:"form-label"},"Vos Fichiers",-1);function te(e,n,t,p,b,w){const y=(0,o.up)("ClientFileListCheckableElement"),g=(0,o.up)("client-new-file-form");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("button",{id:"detailButton",onClick:n[0]||(n[0]=()=>w.handleDisplay())},"Show Detail"),b.displayDetail?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("button",{id:"closeButton",onClick:n[1]||(n[1]=()=>w.handleDisplay())},"X"),(0,o._)("h2",null,"Détails de la demande "+(0,l.zw)(b.newDemand.subject),1),(0,o._)("form",s,[(0,o._)("div",r,[u,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formSubject","onUpdate:modelValue":n[2]||(n[2]=e=>b.newDemand.sujet=e),placeholder:"Trouvez un titre pour votre demande",required:""},null,512),[[a.nr,b.newDemand.sujet]])]),(0,o._)("div",d,[m,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Default select example",id:"formNature","onUpdate:modelValue":n[3]||(n[3]=e=>b.newDemand.nature=e),required:""},c,512),[[a.bM,b.newDemand.nature]])]),(0,o._)("div",f,[h,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Default select example",id:"formType","onUpdate:modelValue":n[4]||(n[4]=e=>b.newDemand.type=e),required:""},_,512),[[a.bM,b.newDemand.type]])]),(0,o._)("div",v,[D,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Default select example",id:"formAge","onUpdate:modelValue":n[5]||(n[5]=e=>b.newDemand.age=e),required:""},C,512),[[a.bM,b.newDemand.age]])]),(0,o._)("div",k,[V,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Default select example",id:"formPurpose","onUpdate:modelValue":n[6]||(n[6]=e=>b.newDemand.usage=e),required:""},F,512),[[a.bM,b.newDemand.usage]])]),(0,o._)("div",q,[x,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Default select example",id:"formResearchStatus","onUpdate:modelValue":n[7]||(n[7]=e=>b.newDemand.status_recherche=e),required:""},E,512),[[a.bM,b.newDemand.status_recherche]])]),(0,o._)("div",U,[S,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formCountry","onUpdate:modelValue":n[8]||(n[8]=e=>b.newDemand.pays=e),placeholder:"Renseignez le pays où se situe le bien",required:""},null,512),[[a.nr,b.newDemand.pays]])]),(0,o._)("div",T,[$,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formCity","onUpdate:modelValue":n[9]||(n[9]=e=>b.newDemand.ville=e),placeholder:"Renseignez la ville où se situe le bien",required:""},null,512),[[a.nr,b.newDemand.ville]])]),(0,o._)("div",N,[R,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formAcquisitionAmount","onUpdate:modelValue":n[10]||(n[10]=e=>b.newDemand.montant_bien=e),placeholder:"Renseignez la valeur estimée du bien",required:""},null,512),[[a.nr,b.newDemand.montant_bien]])]),(0,o._)("div",M,[O,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formTravauxAmount","onUpdate:modelValue":n[11]||(n[11]=e=>b.newDemand.montant_travaux=e),placeholder:"Renseignez la valeur estimée des travaux",required:""},null,512),[[a.nr,b.newDemand.montant_travaux]])]),(0,o._)("div",Z,[I,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formNotaireAmount","onUpdate:modelValue":n[12]||(n[12]=e=>b.newDemand.frais_notaire=e),placeholder:"Renseignez les frais de notaires, si il y a"},null,512),[[a.nr,b.newDemand.frais_notaire]])]),(0,o._)("div",B,[L,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Default select example",id:"formAloneGroup","onUpdate:modelValue":n[13]||(n[13]=e=>b.newDemand.accompagnement=e),required:""},J,512),[[a.bM,b.newDemand.accompagnement]])]),(0,o._)("div",K,[W,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formApport","onUpdate:modelValue":n[14]||(n[14]=e=>b.newDemand.apport_personnel=e),placeholder:"Renseignez votre apport dans l'acquisition",required:""},null,512),[[a.nr,b.newDemand.apport_personnel]])]),(0,o._)("div",Y,[Q,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formComment","onUpdate:modelValue":n[15]||(n[15]=e=>b.newDemand.commentaire=e),placeholder:"Vous pouvez ajouter tout détail que vous pensez significant"},null,512),[[a.nr,b.newDemand.commentaire]])]),(0,o._)("div",ee,[ne,(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(b.userFiles,(e=>((0,o.wg)(),(0,o.j4)(y,{key:e.id_document,file:e},null,8,["file"])))),128))]),(0,o.Wm)(g)]),(0,o._)("button",{type:"submit",class:"btn btn-primary",onClick:n[16]||(n[16]=e=>w.handleSubmit(e))},"Enregistrer les modifications"),(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:n[17]||(n[17]=e=>w.handleDelete(e))},"Supprimer")])],512)):(0,o.kq)("",!0)])}var oe=t(9500),le=t(8508),ae={name:"ClientDemandDetail",components:{ClientFileListCheckableElement:oe.Z,ClientNewFileForm:le.Z},props:{propDemand:{type:Object,required:!0}},data(){return{newDemand:{},displayDetail:!1,userFiles:[]}},methods:{handleSubmit(e){""!=this.newDemand.subject&&""!=this.newDemand.nature&&""!=this.newDemand.type&&""!=this.newDemand.age&&""!=this.newDemand.usage&&""!=this.newDemand.researchStatus&&""!=this.newDemand.country&&""!=this.newDemand.city&&""!=this.newDemand.acquisitionAmount&&""!=this.newDemand.aloneGroup&&""!=this.newDemand.apport&&(e.preventDefault(),fetch(this.api_url+"demande_client/updateDemande/"+this.newDemand.id_demande,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(this.newDemand)}).then((e=>{if(e.ok)return e.json();throw new Error("Erreur lors de la mise à jour de la demande")})).then((e=>{console.log(e),this.displayDetail=!1})).catch((e=>{console.log(e),alert(e.message)})))},handleDelete(){fetch(this.api_url+"demande_client/deleteDemande/"+this.newDemand.id_demande,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();throw new Error("Erreur lors de la suppression de la demande")})).then((e=>{console.log(e),this.$parent.$parent.userDemands=this.$parent.$parent.userDemands.filter((e=>e.id_demande!=this.newDemand.id_demande)),this.displayDetail=!1})).catch((e=>{console.log(e),alert(e.message)}))},handleDisplay(){this.displayDetail=!this.displayDetail}},mounted(){fetch(this.api_url+"document/getAllDocuments",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((e=>{if(e.ok)return e.json();throw new Error("Something went wrong")})).then((e=>{console.log(e),this.userFiles=e,this.newDemand=this.propDemand})).catch((e=>{console.log(e),alert("Une erreur est survenue, veuillez réessayer plus tard")}))}},ie=t(89);const se=(0,ie.Z)(ae,[["render",te]]);var re=se},9500:function(e,n,t){t.d(n,{Z:function(){return p}});var o=t(3396),l=t(7139);const a=["id","name"],i=["for"],s=(0,o._)("br",null,null,-1);function r(e,n,t,r,u,d){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("input",{type:"checkbox",id:t.file.id_document,ref:t.file.id_document,name:t.file.id,value:"Bike",onChange:n[0]||(n[0]=e=>d.handleAddFile(e))},null,40,a),(0,o._)("label",{for:t.file.id},(0,l.zw)(t.file.nom_document),9,i),s])}t(7658);var u={name:"ClientFileListCheckableElement",props:{file:{type:Object,required:!0}},methods:{handleAddFile(e){e.target.checked?this.$parent.newDemand.files.push(this.file.id_document):this.$parent.newDemand.files=this.$parent.newDemand.files.filter((e=>e!==this.file.id_document)),console.log(this.$parent.newDemand.files)}},updated(){void 0==this.$parent.newDemand.files&&(this.$parent.newDemand.files=[]),this.$parent.newDemand.files.includes(this.file.id_document)?this.$refs[this.file.id_document].checked=!0:this.$refs[this.file.id_document].checked=!1},mounted(){void 0==this.$parent.newDemand.files&&(this.$parent.newDemand.files=[]),this.$parent.newDemand.files.includes(this.file.id_document)?this.$refs[this.file.id_document].checked=!0:this.$refs[this.file.id_document].checked=!1}},d=t(89);const m=(0,d.Z)(u,[["render",r]]);var p=m},8508:function(e,n,t){t.d(n,{Z:function(){return h}});var o=t(3396),l=t(9242);const a={key:0,id:"modal-form",ref:"modalForm"},i=(0,o._)("h2",null,"Nouveau document",-1),s={class:"mb-3"},r=(0,o._)("label",{for:"formFile",class:"form-label"},"Votre fichier",-1),u={class:"mb-3"},d=(0,o._)("label",{for:"formNameTitle",class:"form-label"},"Nom du fichier",-1);function m(e,n,t,m,p,c){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("button",{type:"none",id:"openNFButton",onClick:n[0]||(n[0]=()=>c.handleDisplay())},"NOUVEAU DOCUMENT"),p.displayForm?((0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("button",{id:"closeButton",onClick:n[1]||(n[1]=()=>c.handleDisplay())},"X"),i,(0,o._)("form",null,[(0,o._)("div",s,[r,(0,o._)("input",{class:"form-control",type:"file",id:"formFile",onChange:n[2]||(n[2]=e=>c.onFilesChange(e)),required:""},null,32)]),(0,o._)("div",u,[d,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"formNameTitle","onUpdate:modelValue":n[3]||(n[3]=e=>p.name=e),required:""},null,512),[[l.nr,p.name]])]),(0,o._)("button",{type:"submit",class:"btn btn-success",onClick:n[4]||(n[4]=e=>c.handleSubmit(e))},"Envoyer"),(0,o._)("button",{type:"none",class:"btn btn-warning",onClick:n[5]||(n[5]=()=>c.handleDisplay())},"Annuler")])],512)):(0,o.kq)("",!0)])}t(7658);var p={name:"ClientNewFileForm",data(){return{name:"",file:null,displayForm:!1}},methods:{onFilesChange(e){this.file=e.target.files[0]},handleSubmit(e){if(""==this.name||null==this.file)return;e.preventDefault();let n=new FormData;n.append("file",this.file),n.append("nom_document",this.name);let t=new XMLHttpRequest;t.open("POST",this.api_url+"document/addDocument"),t.setRequestHeader("Authorization",localStorage.getItem("token")),t.send(n),t.onload=()=>{if(200==t.status){let e=JSON.parse(t.response);console.log("File sent"),console.log(e.id_document),this.$parent.userFiles.push({nom_document:this.name+"."+this.file.name.split(".").pop(),id_document:e.id_document}),this.name="",this.file=null,this.displayForm=!1}else console.log("Error while sending file")}},handleDisplay(){console.log("display"),this.displayForm=!this.displayForm}}},c=t(89);const f=(0,c.Z)(p,[["render",m]]);var h=f}}]);
//# sourceMappingURL=409.048bbd9a.js.map