"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[628],{1628:function(e,n,d){d.r(n),d.d(n,{default:function(){return W}});var a=d(3396),t=d(9242);const s=e=>((0,a.dD)("data-v-d3a12336"),e=e(),(0,a.Cn)(),e),i={id:"links"},l={id:"main-body"},o=s((()=>(0,a._)("h3",null,"Liste des demandes :",-1))),r={id:"demandes-overview-area",class:"section-list"},m={id:"demandes-area-header"},u={id:"search-input",class:"input-group flex-nowrap"},c={id:"demandes-list-container"},p={id:"demandes-list",class:"section-list"};function h(e,n,d,s,h,w){const _=(0,a.up)("HeaderComponent"),f=(0,a.up)("router-link"),v=(0,a.up)("admin-demandes-list-element");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",null,[(0,a.Wm)(_)]),(0,a._)("div",i,[(0,a.Wm)(f,{class:"link",to:"/admin/Banques"},{default:(0,a.w5)((()=>[(0,a.Uk)("Banques")])),_:1}),(0,a.Wm)(f,{class:"link",to:"/admin/Clients"},{default:(0,a.w5)((()=>[(0,a.Uk)("Clients")])),_:1}),(0,a.Wm)(f,{class:"link",to:"/admin/Demandes"},{default:(0,a.w5)((()=>[(0,a.Uk)("Demandes")])),_:1})]),(0,a._)("div",l,[o,(0,a._)("div",r,[(0,a._)("div",m,[(0,a._)("div",u,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":n[0]||(n[0]=e=>h.searchInput=e)},null,512),[[t.nr,h.searchInput]])])]),(0,a._)("div",c,[(0,a._)("ul",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.filteredDemandes,(e=>((0,a.wg)(),(0,a.j4)(v,{onUpdateDemande:n[1]||(n[1]=e=>w.fetchDemandes()),key:e.id,demand:e},null,8,["demand"])))),128))])])])])])}var w=d(7139);const _=e=>((0,a.dD)("data-v-47d756be"),e=e(),(0,a.Cn)(),e),f={id:"buttons_options"},v=_((()=>(0,a._)("path",{fill:"red",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1))),D=[v],g={id:"demandName"},k={class:"demandRow"},C={class:"demandRow"};function b(e,n,d,t,s,i){const l=(0,a.up)("bank-demand-detail");return(0,a.wg)(),(0,a.iD)("div",{id:"demandListElement",class:(0,w.C_)(e.borderClass)},[(0,a._)("div",f,[(0,a._)("span",null,[((0,a.wg)(),(0,a.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16",onClick:n[0]||(n[0]=e=>i.deleteDemande(d.demand.id_demande)),style:{cursor:"pointer"}},D))])]),(0,a._)("span",g," Sujet : "+(0,w.zw)(d.demand.sujet),1),(0,a._)("div",k,[(0,a._)("span",null," Nature : "+(0,w.zw)(d.demand.nature),1)]),(0,a._)("div",C,[(0,a._)("span",null," ID : "+(0,w.zw)(d.demand.id_demande),1)]),(0,a.Wm)(l,{demand:d.demand},null,8,["demand"])],2)}var L={name:"demandesListElement",props:{demand:{type:Object,required:!0}},methods:{handleDisplayDetail(){alert("WIP")},async deleteDemande(e){if(confirm("Voulez-vous vraiment supprimer cette demande ?")){const n=localStorage.getItem("token");await fetch(this.api_url+"admin/deleteDemande/"+e,{method:"DELETE",headers:{Authorization:n}}),this.$emit("updateDemande")}}}},I=d(89);const y=(0,I.Z)(L,[["render",b],["__scopeId","data-v-47d756be"]]);var z=y,U=d(5554),j={name:"BankHomeView",components:{HeaderComponent:U.Z,AdminDemandesListElement:z},data(){return{demandes:[],searchInput:""}},computed:{filteredDemandes(){if(this.searchInput){const e=this.searchInput.toLowerCase();return this.demandes.filter((n=>n.sujet.toLowerCase().includes(e)||n.nature.toLowerCase().includes(e)||n.id_demande.toString().toLowerCase().includes(e)))}return this.demandes}},methods:{async fetchDemandes(){const e=localStorage.getItem("token"),n=await fetch(this.api_url+"admin/getAllDemandes",{headers:{authorization:e}}),d=await n.json();this.demandes=d}},mounted(){this.fetchDemandes()},beforeUnmount(){console.log("Unmounted")}};const E=(0,I.Z)(j,[["render",h],["__scopeId","data-v-d3a12336"]]);var W=E}}]);
//# sourceMappingURL=628.e3a5e1a0.js.map