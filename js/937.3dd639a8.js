"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[937],{5937:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var i=n(3396),l=n(9242);const a={id:"main-body"},s=(0,i._)("h3",null,"Liste des clients :",-1),o={id:"clients-overview-area",class:"section-list"},c={id:"clients-area-header"},r={id:"search-input",class:"input-group flex-nowrap"},d={id:"clients-list-container"},u={id:"clients-list",class:"section-list"};function p(e,t,n,p,h,m){const f=(0,i.up)("HeaderComponent"),w=(0,i.up)("clients-list-element");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",null,[(0,i.Wm)(f)]),(0,i._)("div",a,[s,(0,i._)("div",o,[(0,i._)("div",c,[(0,i._)("div",r,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":t[0]||(t[0]=e=>h.searchInput=e)},null,512),[[l.nr,h.searchInput]])])]),(0,i._)("div",d,[(0,i._)("ul",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.clients,(e=>((0,i.wg)(),(0,i.j4)(w,{onUpdateClient:t[1]||(t[1]=e=>m.fetchClients()),key:e.id,client:e},null,8,["client"])))),128))])])])])])}var h=n(7139);const m={id:"buttons_options",style:{"padding-top":"10px"}},f=(0,i._)("path",{fill:"red",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1),w=[f],_={id:"clientName"},g={class:"clientRow"};function v(e,t,n,l,a,s){const o=(0,i.up)("bank-demand-detail");return(0,i.wg)(),(0,i.iD)("div",{id:"clientListElement",class:(0,h.C_)(s.borderClass)},[(0,i._)("div",m,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16",onClick:t[0]||(t[0]=e=>s.deleteClient(n.client.id_client,n.client.account_status)),style:{cursor:"pointer"}},w))]),(0,i._)("span",_,(0,h.zw)(n.client.nom)+" "+(0,h.zw)(n.client.prenom),1),(0,i._)("div",g,[(0,i._)("span",null," ID : "+(0,h.zw)(n.client.id_client),1)]),(0,i.Wm)(o,{demand:e.demand},null,8,["demand"])],2)}var C={name:"clientsListElement",props:{client:{type:Object,required:!0}},computed:{borderClass(){return this.client.account_status?"active-border":this.client.account_status?"":"inactive-border"}},methods:{handleDisplayDetail(){alert("WIP")},async deleteClient(e,t){if(confirm("Voulez-vous vraiment supprimer/bannir ce client ?")){if(t){const t=localStorage.getItem("token");await fetch(this.api_url+"admin/updateClient/"+e,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({account_status:!1})})}else{const t=localStorage.getItem("token");await fetch(this.api_url+"admin/deleteClient/"+e,{method:"DELETE",headers:{Authorization:t}})}this.$emit("updateClient")}}}},b=n(89);const y=(0,b.Z)(C,[["render",v]]);var k=y,z=n(7275),I={name:"BankHomeView",components:{HeaderComponent:z.Z,ClientsListElement:k},data(){return{clients:[],searchInput:""}},watch:{searchInput(e){console.log(e),this.performSearch()}},methods:{async fetchClients(){const e=localStorage.getItem("token"),t=await fetch(this.api_url+"admin/getAllClients",{headers:{authorization:e}}),n=await t.json();console.log(n),this.clients=n},performSearch(){}},mounted(){console.log("Mounted"),this.fetchClients()},beforeUnmount(){console.log("Unmounted")}};const L=(0,b.Z)(I,[["render",p]]);var D=L}}]);
//# sourceMappingURL=937.3dd639a8.js.map