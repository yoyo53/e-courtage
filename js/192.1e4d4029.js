"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[192],{192:function(e,n,a){a.r(n),a.d(n,{default:function(){return E}});var d=a(3396),t=a(9242);const s={id:"main-body"},i=(0,d._)("h3",null,"Liste des demandes :",-1),l={id:"demandes-overview-area",class:"section-list"},o={id:"demandes-area-header"},r={id:"search-input",class:"input-group flex-nowrap"},m={id:"demandes-list-container"},c={id:"demandes-list",class:"section-list"};function u(e,n,a,u,p,h){const w=(0,d.up)("HeaderComponent"),f=(0,d.up)("admin-demandes-list-element");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d._)("div",null,[(0,d.Wm)(w)]),(0,d._)("div",s,[i,(0,d._)("div",l,[(0,d._)("div",o,[(0,d._)("div",r,[(0,d.wy)((0,d._)("input",{type:"text",class:"form-control",placeholder:"Recherche","aria-label":"Recherche","aria-describedby":"addon-wrapping","onUpdate:modelValue":n[0]||(n[0]=e=>p.searchInput=e)},null,512),[[t.nr,p.searchInput]])])]),(0,d._)("div",m,[(0,d._)("ul",c,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(p.demandes,(e=>((0,d.wg)(),(0,d.j4)(f,{onUpdateDemande:n[1]||(n[1]=e=>h.fetchDemandes()),key:e.id,demand:e},null,8,["demand"])))),128))])])])])],64)}var p=a(7139);const h={id:"buttons_options"},w=(0,d._)("path",{fill:"red",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1),f=[w],_={id:"demandName"},v={class:"demandRow"},g={class:"demandRow"};function D(e,n,a,t,s,i){const l=(0,d.up)("bank-demand-detail");return(0,d.wg)(),(0,d.iD)("div",{id:"demandListElement",class:(0,p.C_)(e.borderClass)},[(0,d._)("div",h,[(0,d._)("span",null,[((0,d.wg)(),(0,d.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16",onClick:n[0]||(n[0]=e=>i.deleteDemande(a.demand.id_demande)),style:{cursor:"pointer"}},f))])]),(0,d._)("span",_," Sujet : "+(0,p.zw)(a.demand.sujet),1),(0,d._)("div",v,[(0,d._)("span",null," Nature : "+(0,p.zw)(a.demand.nature),1)]),(0,d._)("div",g,[(0,d._)("span",null," ID : "+(0,p.zw)(a.demand.id_demande),1)]),(0,d.Wm)(l,{demand:a.demand},null,8,["demand"])],2)}var b={name:"demandesListElement",props:{demand:{type:Object,required:!0}},methods:{handleDisplayDetail(){alert("WIP")},async deleteDemande(e){if(confirm("Voulez-vous vraiment supprimer cette demande ?")){const n=localStorage.getItem("token");await fetch(this.api_url+"admin/deleteDemande/"+e,{method:"DELETE",headers:{Authorization:n}}),this.$emit("updateDemande")}}}},k=a(89);const y=(0,k.Z)(b,[["render",D]]);var L=y,z=a(7275),C={name:"BankHomeView",components:{HeaderComponent:z.Z,AdminDemandesListElement:L},data(){return{demandes:[],searchInput:""}},watch:{searchInput(e){console.log(e),this.performSearch()}},methods:{async fetchDemandes(){const e=localStorage.getItem("token"),n=await fetch(this.api_url+"admin/getAllDemandes",{headers:{authorization:e}}),a=await n.json();console.log(a),this.demandes=a},performSearch(){}},mounted(){console.log("Mounted"),this.fetchDemandes()},beforeUnmount(){console.log("Unmounted")}};const I=(0,k.Z)(C,[["render",u]]);var E=I}}]);
//# sourceMappingURL=192.1e4d4029.js.map